!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.HAccountDialog=t()}}(function(){var t,e,n;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n?n:t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){const r=t("../errors");n.decodeJWTPayload=function(t){var e=t.split(".")[1];if(!e)throw new r.InvalidToken(t);return JSON.parse(atob(e))},n.toArray=function(t){return Array.prototype.slice.call(t,0)},n.focusAndSelectAll=function(t){t.focus(),t.select()}},{"../errors":14}],2:[function(t,e,n){function r(t){var e=t.split(".")[1];if(!e)throw new u.InvalidToken(t);return JSON.parse(atob(e))}function i(t){h.call(this,t),this.localStoragePrefix=t.localStoragePrefix||"h_account_",this.status=void 0,this._cachedAccount=void 0,this.getCurrentAccount=s(this.getCurrentAccount.bind(this),{cacheKey:function(){return"constant"}})}const o=t("util"),a=t("bluebird"),s=t("cache-promise-fn"),c="logged_in",l="logged_out",u=t("../errors"),h=t("../index");o.inherits(i,h),i.prototype.constants={LOGGED_IN:c,LOGGED_OUT:l},i.errors=u,i.prototype.getAuthToken=function(){var t=this.localStoragePrefix+"auth_token";return window.localStorage.getItem(t)||!1},i.prototype.signUp=function(t,e){e=e||{};var n=t.username,r=t.password;return this.createAccount(t).then(function(t){return e.immediatelyLogIn?this.logIn(n,r).then(function(){return t}):t}.bind(this))},i.prototype.getCurrentAccount=function(){return new a(function(t,e){var n=this.getAuthToken();if(n)if(this._cachedAccount)t(this._cachedAccount);else{var i=r(n),o=i.username;this.getAccount(n,o).then(function(e){this._cachedAccount=e,this._setAuthStatus(c),t(e)}.bind(this)).catch(e)}else this._setAuthStatus(l),e(new u.NotLoggedIn)}.bind(this)).catch(function(t){return"InvalidToken"===t.name||"Unauthorized"===t.name?(this._destroyAuthToken(),this._setAuthStatus(l),a.reject(new u.NotLoggedIn)):a.reject(t)}.bind(this))},i.prototype.logIn=function(t,e){return this.generateToken(t,e).then(function(t){this._saveAuthToken(t);var e=r(t);return this._setAuthStatus(c),e}.bind(this)).catch(function(t){return delete this._cachedAccount,this._setAuthStatus(l),a.reject(t)}.bind(this))},i.prototype.logOut=function(){return new a(function(t,e){var n=this.getAuthToken();return n?(this._destroyAuthToken(),delete this._cachedAccount,void this.revokeToken(n).then(function(){this._setAuthStatus(l),t()}.bind(this))):void e(new u.NotLoggedIn("Already logged out"))}.bind(this))},i.prototype.setCachedAccount=function(t){this._cachedAccount=t},i.prototype._saveAuthToken=function(t){var e=this.localStoragePrefix+"auth_token";window.localStorage.setItem(e,t)},i.prototype._destroyAuthToken=function(){var t=this.localStoragePrefix+"auth_token";window.localStorage.removeItem(t)},i.prototype._setAuthStatus=function(t){var e=this.status!==t;this.status=t,e&&this.emit("auth-status-change",t)},e.exports=i},{"../errors":14,"../index":15,bluebird:17,"cache-promise-fn":18,util:31}],3:[function(t,e,n){const r=t("../../../../errors");e.exports=function(t,e){t.element.addEventListener("click",function(e){var n=e.target,i=n.getAttribute("data-close-action");if(i)switch(i){case"close":t.close();break;case"cancel":t.reject(new r.UserCancelled("Action cancelled by the user.")),t.close();break;case"logOut":t.hAccountClient.logOut().then(function(){t.reject(new r.UserCancelled("Action cancelled by the user.")),t.close()})}})}},{"../../../../errors":14}],4:[function(t,e,n){e.exports=function(t,e){function n(){var e=o.getAuthToken();e&&o.getCurrentAccount().then(function(t){return o.getAccount(e,t.username)}).then(function(e){o.setCachedAccount(e),"verified"===e.status.value&&(t.resolve(e),t.close())})}var r=t.element.querySelector("#verification-refresh"),i=t.element.querySelector("#verification-resend"),o=t.hAccountClient;r.addEventListener("click",n),i.addEventListener("click",function(t){var e=o.getAuthToken();o.getCurrentAccount().then(function(t){return o.requestEmailVerification(e,t.username)}).then(function(){console.log("verification email resent")}).catch(function(t){console.warn("there was an error resending the verification email",t)})})}},{}],5:[function(t,e,n){const r=(t("../../../../errors"),t("./navigation")),i=t("./login-form"),o=t("./signup-form"),a=t("./close-buttons"),s=t("./email-verification"),c=t("./password-reset"),l=t("./language");var u=function(t,e){r(t,e),i(t,e),o(t,e),a(t,e),s(t,e),c(t,e),l(t,e)};u.setupNavigation=r,u.setupLoginForm=i,u.setupSignupForm=o,u.closeButtons=a,u.setupEmailVerification=s,u.setupPasswordReset=c,e.exports=u},{"../../../../errors":14,"./close-buttons":3,"./email-verification":4,"./language":6,"./login-form":7,"./navigation":8,"./password-reset":9,"./signup-form":10}],6:[function(t,e,n){e.exports=function(t,e){var n=Array.prototype.slice.call(t.element.querySelectorAll("[data-translate]"),0);n.forEach(function(e){var n=e.getAttribute("data-translate");e.innerHTML=t.t(t.model.get("language"),n)})}},{}],7:[function(t,e,n){const r=t("../../../auxiliary");e.exports=function(t,e){var n=t.element.querySelector("#h-account-login"),i=n.querySelector('[name="username"]'),o=n.querySelector('[name="password"]'),a=n.querySelector('[data-state="login-error"]');n.addEventListener("submit",function(e){e.preventDefault(),e.stopPropagation();var n=i.value,s=o.value;t.model.set("state","login-loading"),t.hAccountClient.logIn(n,s).then(function(e){t.resolve(e),t.close()},function(e){t.model.set("state","login-error"),"InvalidCredentials"===e.name?(a.innerHTML="InvalidCredentials",r.focusAndSelectAll(o)):a.innerHTML="Unknown log in error"})})}},{"../../../auxiliary":1}],8:[function(t,e,n){const r=t("../../../auxiliary");e.exports=function(t,e){t.element.addEventListener("click",function(e){var n=e.target,r=n.getAttribute("data-navigate-to");r&&t.model.set("state",r)}),t.model.on("change:state",function(){var e=t.model.get("state");if("signup"===e||"login"===e||"password-reset"===e){var n=t.element.querySelector('[data-state~="'+e+'"] [autofocus]');setTimeout(function(){r.focusAndSelectAll(n)},100)}})}},{"../../../auxiliary":1}],9:[function(t,e,n){e.exports=function(t,e){var n=t.element.querySelector("#h-account-password-reset"),r=n.querySelector('[name="email"]'),i=t.hAccountClient;n.addEventListener("submit",function(e){e.preventDefault(),e.stopPropagation();var n=r.value;t.model.set("state","password-reset-loading"),i.requestPasswordReset(n).then(function(){t.model.set("state","password-reset-sent")}).catch(function(){t.model.set("state","password-reset-error")})})}},{}],10:[function(t,e,n){const r=t("../../../auxiliary");e.exports=function(t,e){var n=t.element.querySelector("#h-account-signup"),i=n.querySelector('[name="full-name"]'),o=n.querySelector('[name="username"]'),a=n.querySelector('[name="email"]'),s=n.querySelector('[name="password"]'),c=n.querySelector('[name="password-confirm"]'),l=n.querySelector("#know-habemus-wrapper"),u=n.querySelector("#know-habemus-other-wrapper"),h=n.querySelector('[name="know-habemus-other"]'),p=(t.element.querySelector('#h-account-signup [data-state="signup-success"]'),t.element.querySelector('#h-account-signup [data-state="signup-error"]')),d=n.querySelector('[name="agree-terms-of-service"]');l.addEventListener("change",function(t){var e=t.target;"know-habemus"===e.getAttribute("name")&&("other"===e.value?(u.removeAttribute("hidden"),h.setAttribute("required","true")):(u.setAttribute("hidden","true"),h.removeAttribute("required")))}),n.addEventListener("submit",function(e){e.preventDefault(),e.stopPropagation();var n,u,f=i.value,v=f.split(/\s+/),g=v[0];v.length>1&&(n=v[v.length-1]),v.length>2&&(v.shift(),v.pop(),u=v.join(" "));var _=o.value,m=a.value,y=s.value,b=c.value,w=l.querySelector('input[type="radio"]:checked').value;return y!==b?(t.model.set("state","signup-error"),p.innerHTML="Passwords do not match",void r.focusAndSelectAll(c)):(w="other"===w?{source:"other",detail:h.value}:{source:w},t.model.set("state","signup-loading"),void t.hAccountClient.signUp({ownerData:{givenName:g,familyName:n,additionalName:u},username:_,email:m,password:y,referrer:w,preferences:{language:t.model.get("language")},legal:{termsOfService:{agreed:!!d.checked}}},{immediatelyLogIn:!0}).then(function(e){t.model.set("state","signup-success"),t.resolve(e)},function(e){t.model.set("state","signup-error"),"UsernameTaken"===e.name?p.innerHTML="UsernameTaken":"EmailTaken"===e.name?p.innerHTML="EmailTaken":(p.innerHTML="Unknown sign up error",console.warn(e))}))})}},{"../../../auxiliary":1}],11:[function(t,e,n){function r(t){var e=document.createElement("style");e.innerHTML=t,document.querySelector("head").appendChild(e)}function i(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild}function o(t){return Array.prototype.slice.call(t,0)}function a(t){this.hAccountClient=t.hAccountClient||new u(t),this.t=t.t||function(t,e){if(arguments.length<2)throw new Error("language and key are required");return w[t][e]},this.model=new c({language:t.language||"en-US"});var e=i(h);this.element=e,f(this,t),this.model.on("change:state",function(t){var n=t.newValue;o(e.querySelectorAll("[data-state]")).forEach(function(t){var e=t.getAttribute("data-state")||"";e=e.split(/\s+/g);var r=e.indexOf(n)!==-1;t.classList.toggle(_,r);o(t.querySelectorAll("[data-show-after]")).forEach(function(t){var e=parseInt(t.getAttribute("data-show-after"),10);t.setAttribute("hidden",!0),setTimeout(function(){t.removeAttribute("hidden")},e)})})}.bind(this)),this.model.on("change:noCancel",function(t){var e=o(this.element.querySelectorAll('[data-action="cancel"]'));t.newValue?e.forEach(function(t){t.setAttribute("hidden",!0)}):e.forEach(function(t){t.removeAttribute("hidden")})}.bind(this)),this.model.on("change:language",function(e){v(this,t)}.bind(this)),this.element.addEventListener("cancel",function(t){this.model.get("noCancel")?t.preventDefault():this.reject(new g.UserCancelled("escKey"))}.bind(this)),s.registerDialog(this.element),t.containerElement&&this.attach(t.containerElement)}const s=(t("util"),t("dialog-polyfill")),c=t("data-obj"),l=t("bluebird"),u=t("../../"),h='<dialog id="h-account-dialog">\n\n  <button class="dialog-close" data-close-action="cancel"></button>\n\n  <div class="h-account-dialog-contents">\n  <!--  logo habemus -->\n  <svg id="logo-habemus" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="152px"\n  \t height="32px" viewBox="0 0 152 32" enable-background="new 0 0 152 32" xml:space="preserve">\n  <g id="Layer_1">\n  \t<g>\n  \t\t<g>\n  \t\t\t<path fill="#3C3C3C" d="M0.742,3.967h4.164v5.658v2.48c0.986-1.844,3.084-2.64,5.15-2.608c2.701,0,4.387,0.923,5.404,2.448\n  \t\t\t\tc1.049,1.527,1.367,3.593,1.367,5.946v9.602h-4.164v-9.411c0-1.335-0.223-2.479-0.795-3.306c-0.604-0.827-1.559-1.369-3.02-1.369\n  \t\t\t\tc-1.654,0-2.639,0.669-3.211,1.528c-0.572,0.857-0.732,1.907-0.732,2.797v9.761H0.742V3.967z"/>\n  \t\t\t<path fill="#3C3C3C" d="M39.463,27.493h-4.168v-2.511c-1.111,2.033-3.432,3.051-5.881,3.051c-5.594,0-8.867-4.356-8.867-9.283\n  \t\t\t\tc0-5.5,3.973-9.253,8.867-9.253c3.18,0,5.119,1.686,5.881,3.086v-2.545h4.168V27.493z M24.709,18.846\n  \t\t\t\tc0,2.161,1.559,5.309,5.311,5.309c2.322,0,3.846-1.208,4.641-2.798c0.414-0.763,0.604-1.59,0.668-2.447\n  \t\t\t\tc0.033-0.827-0.127-1.686-0.477-2.448c-0.732-1.653-2.352-3.084-4.863-3.084c-3.371,0-5.279,2.734-5.279,5.437V18.846z"/>\n  \t\t\t<path fill="#3C3C3C" d="M44.162,3.967h4.166v6.135v2.1c1.717-2.131,4.229-2.704,5.818-2.704c4.131,0,8.711,3.021,8.711,9.189\n  \t\t\t\tc0,5.913-4.133,9.347-8.904,9.347c-2.732,0-4.863-1.336-5.785-3.051v2.511h-4.006V3.967z M58.691,18.718\n  \t\t\t\tc0-2.861-2.193-5.341-5.246-5.341c-3.242,0-5.277,2.543-5.277,5.373c0,2.925,2.035,5.404,5.182,5.404\n  \t\t\t\tc3.404,0,5.342-2.702,5.342-5.404V18.718z"/>\n  \t\t\t<path fill="#3C3C3C" d="M69.689,20.149c0.189,2.797,2.67,4.354,5.055,4.323c2.035,0,3.402-0.923,4.197-2.353h4.291\n  \t\t\t\tc-0.826,1.939-2.066,3.402-3.529,4.387c-1.463,1.018-3.178,1.526-4.992,1.526c-5.373,0-9.219-4.356-9.219-9.22\n  \t\t\t\tc0-4.959,3.879-9.316,9.156-9.316c2.605,0,4.896,0.986,6.518,2.672c2.131,2.194,2.924,4.928,2.574,7.98H69.689z M79.639,16.97\n  \t\t\t\tc-0.158-1.653-1.908-3.975-4.959-3.943c-3.084,0-4.768,2.227-4.926,3.943H79.639z"/>\n  \t\t\t<path fill="#3C3C3C" d="M87.488,10.038H91.4v2.194c0.381-0.794,2.066-2.735,5.086-2.735c1.432,0,3.02,0.414,4.291,1.781\n  \t\t\t\tc0.383,0.413,0.826,1.145,1.049,1.591c0.318-0.542,0.699-1.114,1.273-1.654c1.08-1.018,2.605-1.718,4.451-1.718\n  \t\t\t\tc1.461,0,3.305,0.383,4.641,1.749c1.59,1.654,1.906,3.085,1.906,6.677v2.227h-4.164v-2.067c0-1.112-0.096-2.32-0.699-3.243\n  \t\t\t\tc-0.445-0.856-1.271-1.432-2.734-1.432c-1.461,0-2.479,0.638-3.02,1.592c-0.541,0.953-0.604,1.875-0.604,2.924v9.57h-4.166v-9.57\n  \t\t\t\tc0-1.017-0.096-2.003-0.539-2.893c-0.51-0.922-1.369-1.59-2.861-1.623c-1.527,0-2.479,0.732-2.988,1.623\n  \t\t\t\tc-0.51,0.922-0.668,2.003-0.668,3.021v9.442h-4.166V10.038z"/>\n  \t\t\t<path fill="#3C3C3C" d="M134.377,27.493h-3.91v-2.321c-0.73,1.367-2.287,2.894-5.436,2.861c-5.723-0.031-6.805-4.388-6.805-7.439\n  \t\t\t\tV10.038h4.166v9.506c0,2.576,0.859,4.61,3.814,4.578c2.988,0,4.006-1.971,4.006-4.451v-9.633h4.164V27.493z"/>\n  \t\t\t<path fill="#3C3C3C" d="M146.646,14.744c-0.033-0.922-0.51-1.875-2.129-1.875c-1.4,0-2.066,0.888-2.066,1.748\n  \t\t\t\tc0.029,1.111,1.301,1.717,2.955,2.193c2.799,0.763,5.816,1.589,5.85,5.341c0.064,3.593-2.957,5.882-6.613,5.882\n  \t\t\t\tc-2.701,0-6.357-1.399-6.676-5.628h4.166c0.158,1.876,1.779,2.258,2.574,2.258c1.303,0,2.416-0.859,2.383-2.035\n  \t\t\t\tc0-1.494-1.301-1.907-4.514-3.021c-2.352-0.73-4.26-2.034-4.291-4.547c0-3.433,2.893-5.563,6.264-5.563\n  \t\t\t\tc2.352,0,5.848,1.05,6.199,5.247H146.646z"/>\n  \t\t\t<rect x="109.934" y="23.328" fill="#0ADDA6" width="4.164" height="4.165"/>\n  \t\t</g>\n  \t</g>\n  </g>\n  </svg>\n\n  <!-- navigation bar -->\n  <section\n    data-state="login login-error signup signup-error"\n    id="h-account-action-selector">\n    <button\n      class="button-tab"\n      data-state="login login-error"\n      data-navigate-to="login"\n      data-translate="logIn">\n      Log in\n    </button>\n    <span>|</span>\n    <button\n      class="button-tab"\n      data-state="signup signup-error"\n      data-navigate-to="signup"\n      data-translate="signUp">\n      Sign up\n    </button>\n  </section>\n  <!-- navigation bar -->\n\n  <!-- v login v -->\n  <section data-state="login login-error">\n    <form id="h-account-login">\n      <label>\n        <span data-translate="usernameOrEmail">username or e-mail</span>\n        <input\n          type="text"\n          name="username"\n          class="h-account-username"\n          required\n          autofocus>\n      </label>\n      <label>\n        <span data-translate="password">password</span>\n        <input\n          type="password"\n          name="password"\n          class="h-account-password"\n          required>\n      </label>\n\n      <label\n        class="h-account-error-message"\n        data-state="login-error"\n        data-translate="loginError">login error</label>\n\n      <button\n        class="primary"\n        type="submit"\n        data-translate="logIn">log in</button>\n    </form>\n\n    <button\n      class="button-bottom"\n      data-navigate-to="password-reset"\n      data-translate="forgotPassword">\n      forgot your password?\n    </button>\n  </section>\n\n  <section data-state="login-loading">\n    <div class="spinner"></div>\n    <!-- login-loading -->\n  </section>\n  <!-- ^ login ^ -->\n\n  <!-- v signup v -->\n  <section data-state="signup signup-error">\n    <form id="h-account-signup">\n      <label>\n        <span data-translate="fullName">full name</span>\n        <input\n          type="text"\n          name="full-name"\n          required\n          autofocus>\n      </label>\n      <label>\n        <span  data-translate="username">username</span>\n        <input\n          type="text"\n          name="username"\n          class="h-account-username"\n          required\n          autofocus>\n      </label>\n      <label>\n        <span data-translate="email">e-mail</span>\n        <input\n          type="email"\n          name="email"\n          class="h-account-email"\n          required\n          autofocus>\n      </label>\n      <label>\n        <span data-translate="password">password</span>\n        <input\n          type="password"\n          name="password"\n          class="h-account-password"\n          required\n          minlength="6">\n      </label>\n      <label>\n        <span data-translate="confirmYourPassword">confirm your password</span>\n        <input\n          type="password"\n          name="password-confirm"\n          class="h-account-password-confirm"\n          required\n          minlength="6">\n      </label>\n      <div id="know-habemus-wrapper" class="how-know-habemus">\n        <label>\n          <span data-translate="howKnowHabemus">Como conheceu a habemus?</span>\n        </label>\n        <label>\n          <input\n            type="radio"\n            required\n            name="know-habemus"\n            value="workshop">\n          <span data-translate="workshop">Participei de oficina</span>\n        </label>\n        <label>\n          <input\n            type="radio"\n            required\n            name="know-habemus"\n            value="facebook">\n          <span data-translate="facebook">Facebook</span>\n        </label>\n        <label>\n          <input\n            type="radio"\n            required\n            name="know-habemus"\n            value="search">\n          <span data-translate="search">Ferramentas de busca</span>\n        </label>\n        <label>\n          <input\n            type="radio"\n            required\n            name="know-habemus"\n            value="indication">\n          <span data-translate="indication">Indicação de alguém</span>\n        </label>\n        <label>\n          <input\n            type="radio"\n            required\n            name="know-habemus"\n            value="other">\n          <span data-translate="other">Outros</span>\n        </label>\n      </div>\n      <label id="know-habemus-other-wrapper" hidden>\n        <span data-translate="specifyOther">por favor especifique</span>\n        <input\n          type="text"\n          name="know-habemus-other"\n          >\n      </label>\n      <label id="terms">\n        <input\n          type="checkbox"\n          name="agree-terms-of-service"\n          class="agree"\n          required>\n        <span data-translate="readAndAgree">Li e concordo com os </span>\n        <a href="#" target="_blank" data-translate="useTerms"> Termos de uso</a>\n      </label>\n      <label\n        class="h-account-error-message"\n        data-state="signup-error"\n        data-translate="signupError">signup error</label>\n      <button type="submit" class="primary" data-translate="signUp">sign up</button>\n    </form>\n  </section>\n\n  <section data-state="signup-loading">\n    <div class="spinner"></div>\n    <!-- signup-loading -->\n  </section>\n\n  <section data-state="signup-success">\n    <p>Signup realizado com sucesso!</p>\n    <button data-close-action="close" class="primary">ok</button>\n  </section>\n  <!-- ^ signup ^ -->\n\n  <!-- password reset -->\n  <section data-state="password-reset">\n    <button data-navigate-to="login" class="dialog-back" data-translate="forgotPasswordTitle">Forgot my password</button>\n\n    <p data-translate="forgotPasswordText">We\'ll send you an e-mail to reset your password</p>\n\n    <form id="h-account-password-reset">\n      <label>\n        <span>e-mail</span>\n        <input\n          type="email"\n          name="email"\n          class="h-account-email"\n          required\n          autofocus>\n      </label>\n\n      <button type="submit" class="primary" data-translate="sendEmail">send email</button>\n    </form>\n  </section>\n\n  <section data-state="password-reset-loading">\n    <div class="spinner"></div>\n    <!-- password-reset-loading -->\n  </section>\n\n  <section data-state="password-reset-sent">\n    <h1 data-transtale="PasswordResetSentTitle">Password reset request created with success.</h1>\n    <p data-transtale="PasswordResetSentText">You will be receiving shortly an e-mail with further instructions.</p>\n    <button data-navigate-to="login" class="primary">ok</button>\n  </section>\n\n  <section data-state="password-reset-error">\n    <button data-navigate-to="password-reset" class="dialog-back" data-translate="back">Back</button>\n    <p data-translate="passwordResetError">Something went wrong with password reset. Please go back and try again</p>\n  </section>\n  <!-- password reset -->\n\n  <!-- email verification -->\n  <section data-state="email-verification">\n    <h1 data-translate="emailVerificationTitle">Verifique seu e-mail</h1>\n    <p data-translate="emailVerificationText">Sua conta foi criada com sucesso.<br>\n      Para garantir sua segurança, enviamos um e-mail com os próximos passos da verificação.</p>\n\n    <div class="button-container">\n      <button id="verification-resend" class="primary">reenviar e-mail</button>\n      <button id="verification-refresh" data-show-after="15000" hidden>já verifiquei e-mail</button><!-- este botão deve aparecer após 20s -->\n    </div>\n\n    <button\n      class="button-bottom"\n      data-close-action="logOut"\n      data-translate="logOut">\n      sair\n    </button>\n\n  </section>\n  <!-- email verification -->\n\n  </div>\n\n</dialog>\n',p='/*\nColors reference:\n\n@habemus-green-dark: #0adda6;\n@habemus-green-light: #3eeeb7;\n\n@habemus-off-white: #f5f5f5;\n@habemus-gray-light: #cecece;\n@habemus-gray-medium: #a3a3a3;\n@habemus-gray-dark: #6d6d6d;\n@habemus-dark: #3c3c3c;\n\n@habemus-error: #E54A4A;\n*/\n\n#h-account-dialog {\n  font-family: "Montserrat", sans-serif;\n  font-weight: 400;\n\n  /*padding: 50px; media query */\n  border: none;\n  width: 80%;\n  margin: 0 auto;\n  min-width: 280px;\n  max-width: 480px;\n\n  max-height: 100vh;\n  box-sizing: border-box;\n  overflow: auto;\n  text-align: left;\n\n  /* styles default from  Polyfill - to be subcribed */\n  /*top: 50%;\n  transform: translate(0, -50%); MEDIA*/\n}\n\n#h-account-dialog *[hidden] {\n  display: none !important;\n}\n\n#h-account-dialog h1 {\n  font-family: "Montserrat", sans-serif;\n  font-weight: 400;\n\n  font-size: 16px;\n  margin-bottom: 24px;\n}\n\n#h-account-dialog p {\n  font-family: "Open Sans", sans-serif;\n  font-weight: 400;\n  font-size: 14px;\n  margin-bottom: 24px;\n}\n\n#h-account-dialog + .backdrop,\n#h-account-dialog::backdrop {\n  background-color: rgba(0,0,0,0.6);\n}\n\n#h-account-dialog #logo-habemus {\n  display: block;\n  width: 94px;\n  margin-bottom: 24px;\n}\n\n#h-account-dialog button {\n  font-family: "Open Sans", sans-serif;\n  font-size: 16px;\n  padding: 0 24px;\n  line-height: 50px;\n  background-color: #cecece; /* @habemus-gray-light */\n  color: #3c3c3c; /* @habemus-dark; */\n  text-align: center;\n  display: block;\n  /*margin: 0 auto;*/\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n  border: none;\n}\n\n#h-account-dialog button:hover {\n  background-color: #d6d6d6;\n}\n\n#h-account-dialog button.primary {\n  background-color: #0adda6; /* @habemus-green-dark; */\n  color: #3c3c3c; /* @habemus-dark; */\n}\n\n#h-account-dialog button.primary:hover {\n  background-color: #3eeeb7; /* @habemus-green-light; */\n  color: #3c3c3c; /* @habemus-dark; */\n}\n\n#h-account-dialog .button-container {\n  margin-bottom: -10px;\n}\n\n#h-account-dialog .button-container button {\n  display: inline-block;\n  margin-right: 10px;\n  margin-bottom: 10px;\n}\n\n#h-account-dialog .button-container button:last-child {\n  margin-right: 0;\n}\n\n#h-account-dialog > button.dialog-close {\n  position: absolute;\n\n  /*\n  MUST URL ENCODE SVG\n  http://stackoverflow.com/questions/30676125/svg-as-data-uri-triggers-xml-parsing-error-in-firefox\n  */\n  background: url(\'data:image/svg+xml;utf8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g id="Layer_1"></g><g id="Layer_2"><g><line fill="none" stroke="%23cecece" stroke-miterlimit="10" x1="1.103" y1="1.103" x2="22.897" y2="22.897"/><line fill="none" stroke="%23cecece" stroke-miterlimit="10" x1="1.103" y1="22.897" x2="22.897" y2="1.103"/></g></g></svg>\') no-repeat 50% 50%;\n  /*height: 50px;\n  width: 50px; MEDIA */\n  padding: 0;\n\n  top: 2px;\n  right: 2px;\n}\n\n#h-account-dialog > button.dialog-close:hover {\n  background: url(\'data:image/svg+xml;utf8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g id="Layer_1"></g><g id="Layer_2"><g><line fill="none" stroke="%236D6D6D" stroke-miterlimit="10" x1="1.103" y1="1.103" x2="22.897" y2="22.897"/><line fill="none" stroke="%236D6D6D" stroke-miterlimit="10" x1="1.103" y1="22.897" x2="22.897" y2="1.103"/></g></g></svg>\') no-repeat 50% 50%;\n}\n\n#h-account-dialog button.dialog-back {\n  background: url(\'data:image/svg+xml;utf8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g id="MATERIAL"><g><g><polyline fill="none" stroke="%236D6D6D" stroke-miterlimit="10" points="10.315,2.602 0.96,12.14 10.315,21.678 "/></g><line fill="none" stroke="%236D6D6D" stroke-miterlimit="10" x1="0.96" y1="12.141" x2="23.478" y2="12.141"/></g></g></svg>\') no-repeat 0 50%;\n  /*height: 50px;\n  width: 50px; MEDIA */\n  padding: 0 0 0 40px;\n  font-family: \'Montserrat\', sans-serif;\n  font-size: 16px;\n  top: 0px;\n  right: 0px;\n}\n\n/**\n * Error messages\n */\n#h-account-dialog .h-account-error-message {\n  color: #E54A4A;\n  display: none;\n\n  font-size: 12px;\n}\n\n#h-account-dialog .h-account-error-message.active {\n  display: block;\n}\n\n/**\n * State management\n */\n#h-account-dialog section[data-state] {\n  display: none;\n}\n\n#h-account-dialog section[data-state].active {\n  display: block;\n}\n\n/**\n * Action selector\n */\n\n#h-account-action-selector button {\n  font-family: "Montserrat", sans-serif;\n  font-size: 16px;\n  padding: 0;\n  line-height: 1.5;\n  background-color: transparent;\n  color: #a3a3a3; /* @habemus-gray-medium: */\n  text-align: left;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  border: none;\n  border-bottom: 2px solid transparent;\n  display: inline-block;\n}\n\n#h-account-action-selector button:hover {\n  color: #6d6d6d; /* @habemus-gray-dark; */\n  background: transparent;\n}\n\n#h-account-action-selector button.active {\n  color: #000000;\n  border-bottom: 2px solid #3eeeb7;\n}\n\n#h-account-action-selector span {\n  display: inline-block;\n  padding: 0 6px;\n}\n\n/**\n * Forms\n */\n#h-account-dialog form {\n  display: flex;\n  flex-direction: column;\n\n  margin-top: 24px;\n  margin-bottom: 0;\n}\n\n#h-account-dialog form label > * {\n  display: block;\n}\n\n#h-account-dialog form label {\n  margin-bottom: 24px;\n}\n\n#h-account-dialog form label > span,\n#h-account-dialog form .how-know-habemus label:first-child span{\n  font-size: 14px;\n  font-family: "Open Sans", sans-serif;\n}\n\n#h-account-dialog form .how-know-habemus label{\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  margin: 8px 0;\n}\n\n#h-account-dialog form .how-know-habemus label span{\n  font-size: 12px;\n}\n\n#h-account-dialog form .how-know-habemus label [type="radio"] {\n  margin: 3px 6px 3px 3px;\n}\n\n#h-account-dialog form input[type="text"],\n#h-account-dialog form input[type="email"],\n#h-account-dialog form input[type="password"],\n#h-account-dialog form textarea {\n  height: 36px;\n  font-size: 12px;\n  padding: 0 8px;\n  margin: 4px 0;\n  border: 1px solid #cecece; /* @habemus-gray-light */\n  width: 100%;\n  box-sizing: border-box;\n  background-color: #ffffff;\n}\n\n#h-account-dialog form label [type="checkbox"] {\n  margin: 3px 6px 3px 3px;\n}\n\n#h-account-dialog form button[type="submit"] {\n  margin-top: 6px;\n}\n\n#h-account-dialog form label#terms{\n  display: inline-flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n}\n\n#h-account-dialog form label#terms a{\n  font-family: "Open Sans", sans-serif;\n  text-decoration: none;\n  color: #3eeeb7; /* @habemus-green-light; */\n  margin-left: 4px;\n}\n\n#h-account-dialog form label#terms a:hover{\n  color: #0adda6; /* @habemus-green-dark; */\n}\n\n#h-account-dialog button.button-bottom {\n  font-size: 14px;\n  font-family: "Montserrat", sans-serif;\n  color: #a6a6a6;\n  background-color: transparent;\n  padding: 0;\n  line-height: 1.5;\n  margin-top: 18px;\n}\n\n[data-state="password-reset-loading"],\n[data-state="login-loading"],\n[data-state="signup-loading"],\n[data-state="password-reset-loading"] {\n  display: none;\n}\n\n[data-state="password-reset-loading"].active,\n[data-state="login-loading"].active,\n[data-state="signup-loading"].active,\n[data-state="password-reset-loading"].active {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  z-index: 30;\n}\n\n[data-state="password-reset-loading"] .spinner,\n[data-state="login-loading"] .spinner,\n[data-state="signup-loading"] .spinner,\n[data-state="password-reset-loading"] .spinner {\n  width: 60px;\n  height: 60px;\n  background-color: #3eeeb7; /* @habemus-green-light */\n\n  margin: 100px auto;\n  animation: sk-rotateplane 1.2s infinite ease-in-out;\n}\n\n/*\n * animation of loading states\n */\n@-webkit-keyframes sk-rotateplane {\n  0% { -webkit-transform: perspective(120px) }\n  50% { -webkit-transform: perspective(120px) rotateY(180deg) }\n  100% { -webkit-transform: perspective(120px) rotateY(180deg)  rotateX(180deg) }\n}\n\n@keyframes sk-rotateplane {\n  0% {\n  transform: perspective(120px) rotateX(0deg) rotateY(0deg);\n  } 50% {\n  transform: perspective(120px) rotateX(-180.1deg) rotateY(0deg);\n  } 100% {\n  transform: perspective(120px) rotateX(-180deg) rotateY(-179.9deg);\n  }\n}\n\n@keyframes loading-animation {\n  0%, 100% {\n    height: 2px;\n    width: 2px;\n  }\n  50% {\n    height: 50px;\n    width: 50px;\n    transform: translate(-50%, -50%);\n  }\n}\n\n/* WIDTH FROM 0 TO 400 */\n@media screen and (max-width: 400px) {\n  #h-account-dialog {\n    top: 5%;\n    transform: translate(0, 0);\n  }\n\n  #h-account-dialog > div.h-account-dialog-contents {\n    padding: 30px;\n  }\n\n  #h-account-dialog > button.dialog-close {\n    height: 40px;\n    width: 40px;\n  }\n}\n\n/* WIDTH FROM 401 */\n@media screen and (min-width: 401px) {\n  #h-account-dialog {\n    /* ensure firefox and safari use this style */\n    top: 50% !important;\n    transform: translate(0, -50%);\n  }\n\n  #h-account-dialog > div.h-account-dialog-contents {\n    padding: 50px;\n  }\n\n  #h-account-dialog > button.dialog-close {\n    height: 50px;\n    width: 50px;\n  }\n}\n',d="dialog {\n  position: absolute;\n  left: 0; right: 0;\n  width: -moz-fit-content;\n  width: -webkit-fit-content;\n  width: fit-content;\n  height: -moz-fit-content;\n  height: -webkit-fit-content;\n  height: fit-content;\n  margin: auto;\n  border: solid;\n  padding: 1em;\n  background: white;\n  color: black;\n  display: none;\n}\n\ndialog[open] {\n  display: block;\n}\n\ndialog + .backdrop {\n  position: fixed;\n  top: 0; right: 0; bottom: 0; left: 0;\n  background: rgba(0,0,0,0.1);\n}\n\n/* for small devices, modal dialogs go full-screen */\n@media screen and (max-width: 540px) {\n  dialog[_polyfill_modal] {  /* TODO: implement */\n    top: 0;\n    width: auto;\n    margin: 1em;\n  }\n}\n\n._dialog_overlay {\n  position: fixed;\n  top: 0; right: 0; bottom: 0; left: 0;\n}\n\ndialog.fixed {\n  position: fixed;\n  top: 50%;\n  transform: translate(0, -50%);\n}",f=t("./dom-setup"),v=t("./dom-setup/language"),g=t("../../../errors"),_="active",m="login",y="signup",b="email-verification",w={
"pt-BR":t("../languages/pt-BR.json"),"en-US":t("../languages/en-US.json")};r(p),r(d),a.prototype.attach=function(t){this.containerElement=t,t.appendChild(this.element)},a.prototype.logIn=function(t){return t=t||{},this.model.set({state:m,action:"logIn",noCancel:!1,language:t.language}),this.element.hasAttribute("open")||this.element.showModal(),new l(function(t,e){this._logInResolve=t,this._logInReject=e}.bind(this))},a.prototype.signUp=function(t){return t=t||{},this.model.set({state:y,action:"signUp",noCancel:!1,language:t.language}),this.element.hasAttribute("open")||this.element.showModal(),new l(function(t,e){this._signUpResolve=t,this._signUpReject=e}.bind(this))},a.prototype.verifyEmail=function(t){return t=t||{},this.model.set({state:b,action:"verifyEmail",noCancel:!0,language:t.language}),this.element.hasAttribute("open")||this.element.showModal(),new l(function(t,e){this._verifyEmailResolve=t,this._verifyEmailReject=e}.bind(this))},a.prototype.clear=function(){o(this.element.querySelectorAll("input")).forEach(function(t){t.value=""}),this.model.set({state:void 0,action:void 0,noCancel:!1}),delete this._logInResolve,delete this._logInReject,delete this._signUpResolve,delete this._signUpReject},a.prototype.resolve=function(t){var e=this.model.get("action");switch(e){case"logIn":this._logInResolve(t);break;case"signUp":this._signUpResolve(t);break;case"verifyEmail":this._verifyEmailResolve(t);break;default:console.warn("unsupported action",e)}},a.prototype.reject=function(t){var e=this.model.get("action");switch(e){case"logIn":this._logInReject(t);break;case"signUp":this._signUpReject(t);break;case"verifyEmail":this._verifyEmailReject(t);break;default:console.warn("unsupported action",e)}},a.prototype.close=function(){this.clear(),this.element.close()},a.prototype.ensureAccount=function(t){t=t||{};var e=this;return e.hAccountClient.getCurrentAccount().then(function(t){return t}).catch(function(n){return"NotLoggedIn"===n.name?e.logIn(t).then(function(){return e.hAccountClient.getCurrentAccount()}):"AccountNotFound"===n.name?e.signUp(t).then(function(){return e.hAccountClient.getCurrentAccount()}):(console.warn("unknown error",n),e.logOut(),e.logIn(t))}).then(function(n){if(!t.ensureEmailVerified)return n;var r=n.status.value;switch(r){case"new":case"verifying":return e.verifyEmail(t);case"verified":return n;case"cancelled":return l.reject(new g.AccountCancelled);default:console.warn("unsupported account.status.value",n.status.value)}})};const k=["getAuthToken","getCurrentAccount","logOut","on","emit","removeEventListener"];k.forEach(function(t){a.prototype[t]=function(){var e=Array.prototype.slice.call(arguments,0);return this.hAccountClient[t].apply(this.hAccountClient,e)}}),e.exports=a},{"../../":2,"../../../errors":14,"../languages/en-US.json":12,"../languages/pt-BR.json":13,"./dom-setup":5,"./dom-setup/language":6,bluebird:17,"data-obj":21,"dialog-polyfill":22,util:31}],12:[function(t,e,n){e.exports={logIn:"log in",signUp:"sign up",logOut:"log out",usernameOrEmail:"username or email",password:"password",confirmYourPassword:"confirm your password",loginError:"login error",emailVerificationTitle:"Verify your e-mail",emailVerificationText:"Your account has been succesfully created.<br> Check your e-mail for instructions on how to confirm your account",forgotPassword:"forgot my password",forgotPasswordTitle:"Forgot my password",forgotPasswordText:"We'll send you an e-mail to reset your password",PasswordResetSentTitle:"Password reset request sent with success.",PasswordResetSentText:"You will be receiving shortly an e-mail with further instructions.",passwordResetError:"Something went wrong with password reset. Please go back and try again",fullName:"full name",username:"username",email:"e-mail",sendEmail:"send e-mail",howKnowHabemus:"how did you get to know habemus?",workshop:"during a workshop",facebook:"facebook",search:"search engine",indication:"someone recommended me",other:"others",specifyOther:"Please specify",readAndAgree:"I read and agree with",useTerms:"terms of use",signupError:"sign up error",back:"back"}},{}],13:[function(t,e,n){e.exports={logIn:"entrar",signUp:"cadastrar-se",logOut:"sair",usernameOrEmail:"nome de usuário ou e-mail",password:"senha",confirmYourPassword:"confirme sua senha",loginError:"erro ao entrar",emailVerificationTitle:"Verifique seu e-mail",emailVerificationText:"Sua conta foi criada com sucesso.<br> Para garantir sua segurança, enviamos um e-mail com os próximos passos da verificação.",forgotPassword:"esqueci minha senha",forgotPasswordTitle:"Esqueci minha senhaForgot my ",forgotPasswordText:"Enviaremos um e-mail para você redefinir sua senha",PasswordResetSentTitle:"Pedido de redefinição de senha realizado com sucesso.",PasswordResetSentText:"Em breve você receberá um e-mail com os próximos passos para redefinir sua senha.",passwordResetError:"Houve um erro na redefinição de senha. Por favor, volte ao passo anterior e tente novamente",fullName:"nome completo",username:"nome de usuário",email:"e-mail",sendEmail:"enviar e-mail",howKnowHabemus:"como você conheceu a habemus?",workshop:"realizei uma oficina",facebook:"facebook",search:"busquei no google",indication:"alguém me indicou",other:"outro",specifyOther:"especifique, por favor",readAndAgree:"Li e concordo com os",useTerms:"termos de uso",signupError:"erro ao cadastrar",back:"voltar"}},{}],14:[function(t,e,n){function r(t){Error.call(this),this.message=t||"HAccountError"}function i(t,e,n){r.call(this,n),this.option=t,this.kind=e}function o(t){r.call(this,"Username "+t+" is already taken"),this.username=t}function a(t){r.call(this,"Username "+t+" is already taken"),this.email=t}function s(t){r.call(this,"The credentials provided are invalid"),this.detail=t}function c(t){r.call(this,t)}function l(){r.call(this,"Token provided is invalid")}function u(t,e){r.call(this,e),this.identifier=t}function h(){r.call(this)}function p(t){r.call(this,t)}function d(t){r.call(this,t)}const f=t("util");f.inherits(r,Error),r.prototype.name="HAccountError",f.inherits(i,r),i.prototype.name="InvalidOption",f.inherits(o,r),o.prototype.name="UsernameTaken",f.inherits(a,r),a.prototype.name="EmailTaken",f.inherits(s,r),s.prototype.name="InvalidCredentials",f.inherits(c,r),c.prototype.name="Unauthorized",f.inherits(l,r),l.prototype.name="InvalidToken",f.inherits(u,r),u.prototype.name="UserNotFound",f.inherits(h,r),h.prototype.name="AccountCancelled",f.inherits(p,r),p.prototype.name="NotLoggedIn",f.inherits(d,r),d.prototype.name="UserCancelled",n.HAccountError=r,n.InvalidOption=i,n.UsernameTaken=o,n.EmailTaken=a,n.InvalidCredentials=s,n.Unauthorized=c,n.InvalidToken=l,n.UserNotFound=u,n.AccountCancelled=h,n.NotLoggedIn=p,n.UserCancelled=d},{util:31}],15:[function(t,e,n){function r(t){if(!t.serverURI)throw new Error("serverURI is required");this.serverURI=t.serverURI.replace(a,"")}const i=t("util"),o=t("events"),a=(t("bluebird"),/\/$/);i.inherits(r,o),Object.assign(r.prototype,t("./methods/public")),e.exports=r},{"./methods/public":16,bluebird:17,events:23,util:31}],16:[function(t,e,n){const r=t("bluebird"),i=t("superagent"),o=t("../errors");n.createAccount=function(t){return t?t.username?t.email?t.password?t.ownerData&&t.ownerData.givenName?new r(function(e,n){i.post(this.serverURI+"/accounts").send(t).end(function(t,r){return t?void n(r&&r.body&&r.body.error?r.body.error:t):void e(r.body.data)})}.bind(this)):r.reject(new o.InvalidOption("ownerData.givenName","required")):r.reject(new o.InvalidOption("password","required")):r.reject(new o.InvalidOption("email","required")):r.reject(new o.InvalidOption("username","required")):r.reject(new o.InvalidOption("accountData","required"))},n.getAccount=function(t,e){return t?e?new r(function(n,r){i.get(this.serverURI+"/account/"+e).set({Authorization:"Bearer "+t}).end(function(e,i){return e?void r(i&&401===i.statusCode?new o.InvalidToken(t):i&&403===i.statusCode?new o.Unauthorized:i&&404===i.statusCode?new o.UserNotFound:e):void n(i.body.data)}.bind(this))}.bind(this)):r.reject(new o.InvalidOption("username","required")):r.reject(new o.InvalidOption("authToken","required"))},n.generateToken=function(t,e){return t?e?new r(function(n,r){i.post(this.serverURI+"/auth/token/generate").send({username:t,password:e}).end(function(t,e){return t?void r(e&&e.body&&e.body.error?e.body.error:t):void n(e.body.data.token)}.bind(this))}.bind(this)):r.reject(new o.InvalidOption("password","required")):r.reject(new o.InvalidOption("username","required"))},n.revokeToken=function(t){return t?new r(function(e,n){i.post(this.serverURI+"/auth/token/revoke").set("Authorization","Bearer "+t).end(function(t,r){return t?void n(r&&r.body&&r.body.error?r.body.error:t):void e()}.bind(this))}.bind(this)):r.reject(new o.InvalidOption("token","required"))},n.requestEmailVerification=function(t,e){return t?e?new r(function(n,r){i.post(this.serverURI+"/account/"+e+"/request-email-verification").set({Authorization:"Bearer "+t}).end(function(e,i){return e?void r(i&&401===i.statusCode?new o.InvalidToken(t):i&&403===i.statusCode?new o.Unauthorized:e):void n()}.bind(this))}.bind(this)):r.reject(new o.InvalidOption("username","required")):r.reject(new o.InvalidOption("authToken","required"))},n.requestPasswordReset=function(t){return new r(function(e,n){i.post(this.serverURI+"/request-password-reset").send({email:t}).end(function(t,r){return t?void n(r&&r.body&&r.body.error?r.body.error:t):void e()})}.bind(this))},n.updateAccountOwnerData=function(t,e,n){return t?e?n?new r(function(r,a){i.put(this.serverURI+"/account/"+e+"/owner").set({Authorization:"Bearer "+t}).send(n).end(function(e,n){return e?void a(n&&401===n.statusCode?new o.InvalidToken(t):n&&403===n.statusCode?new o.Unauthorized:n&&404===n.statusCode?new o.UserNotFound:e):void r(n.body.data)}.bind(this))}.bind(this)):r.reject(new o.InvalidOption("ownerData","required")):r.reject(new o.InvalidOption("username","required")):r.reject(new o.InvalidOption("authToken","required"))},n.updateAccountPreferences=function(t,e,n){return t?e?n?new r(function(r,a){i.put(this.serverURI+"/account/"+e+"/preferences").set({Authorization:"Bearer "+t}).send(n).end(function(e,n){return e?void a(n&&401===n.statusCode?new o.InvalidToken(t):n&&403===n.statusCode?new o.Unauthorized:n&&404===n.statusCode?new o.UserNotFound:e):void r(n.body.data)}.bind(this))}.bind(this)):r.reject(new o.InvalidOption("preferences","required")):r.reject(new o.InvalidOption("username","required")):r.reject(new o.InvalidOption("authToken","required"))},n.updateApplicationConfig=function(t,e,n,a){return t?e?n?a?new r(function(r,s){i.put(this.serverURI+"/account/"+e+"/config/"+n).set({Authorization:"Bearer "+t}).send(a).end(function(e,n){return e?void s(n&&401===n.statusCode?new o.InvalidToken(t):n&&403===n.statusCode?new o.Unauthorized:n&&404===n.statusCode?new o.UserNotFound:e):void r(n.body.data)}.bind(this))}.bind(this)):r.reject(new o.InvalidOption("config","required")):r.reject(new o.InvalidOption("applicationId","required")):r.reject(new o.InvalidOption("username","required")):r.reject(new o.InvalidOption("authToken","required"))}},{"../errors":14,bluebird:17,superagent:25}],17:[function(e,n,r){(function(e,i){!function(e){if("object"==typeof r&&"undefined"!=typeof n)n.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof i?o=i:"undefined"!=typeof self&&(o=self),o.Promise=e()}}(function(){var t,n,r;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof _dereq_&&_dereq_;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n?n:t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,n,r){"use strict";function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=l}function o(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function a(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var c;try{throw new Error}catch(t){c=t}var l=t("./schedule"),u=t("./queue"),h=t("./util");i.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){h.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},i.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},h.hasDevTools?(i.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},i.prototype.invoke=function(t,e,n){this._trampolineEnabled?a.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},i.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(i.prototype.invokeLater=o,i.prototype.invoke=a,i.prototype.settlePromises=s),i.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},i.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},n.exports=i,n.exports.firstLineError=c},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},c=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var l=n(o),u=new t(e);u._propagateFrom(this,1);var h=this._target();if(u._setBoundTo(l),l instanceof t){var p={promiseRejectionQueued:!1,promise:u,target:h,bindingPromise:l};h._then(e,a,void 0,u,p),l._then(s,c,void 0,u,p),u._setOnCancel(l)}else u._resolveCallback(h);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=this._bitField&-2097153},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+s.classString(t)+" has no method '"+s.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}var a,s=t("./util"),c=s.canEvaluate;s.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(c){var r=a(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),a=o.tryCatch,s=o.errorObj,c=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=a(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,s){return function(c){var l=s._boundValue();t:for(var u=0;u<t.length;++u){var h=t[u];if(h===Error||null!=h&&h.prototype instanceof Error){if(c instanceof h)return o(n).call(l,c)}else if("function"==typeof h){var p=o(h).call(l,c);if(p===a)return p;if(p)return o(n).call(l,c)}else if(r.isObject(c)){for(var d=i(h),f=0;f<d.length;++f){var v=d[f];if(h[v]!=c[v])continue t}return o(n).call(l,c)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,a=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){if(i)return new e}function r(){var t=o.length-1;if(t>=0)return o[t]}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,c=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=c,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,n,r){"use strict";n.exports=function(n,r){function i(t,e){return{promise:e}}function o(){return!1}function a(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+M.toString(t));r._attachCancellationCallback(t)})}catch(t){return t}}function s(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?M.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function c(){return this._onCancelField}function l(t){this._onCancelField=t}function u(){this._cancellationParent=void 0,this._onCancelField=void 0}function h(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function p(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function d(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function f(){this._trace=new P(this._peekContext())}function v(t,e){if(H(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=C(t);M.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),M.notEnumerableProp(t,"__stackCleaned__",!0)}}}function g(t,e,n,r,i){if(void 0===t&&null!==e&&W){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(e._trace){for(var s=e._trace.stack.split("\n"),c=k(s),l=c.length-1;l>=0;--l){var u=c[l];if(!V.test(u)){var h=u.match(z);h&&(o="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(c.length>0)for(var p=c[0],l=0;l<s.length;++l)if(s[l]===p){l>0&&(a="\n"+s[l-1]);break}}var d="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(d,!0,e)}}function _(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),m(n)}function m(t,e,r){if(at.warnings){var i,o=new U(t);if(e)r._attachExtraTrace(o);else if(at.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var a=C(o);o.stack=a.message+"\n"+a.stack.join("\n")}et("warning",o)||E(o,"",!0)}}function y(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function b(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function w(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(var s=a;s>=0;--s){var c=r[s];if(e[i]!==c)break;e.pop(),i--}e=r}}function k(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||B.test(r),o=i&&rt(r);i&&!o&&(X&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function x(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||B.test(r))break}return n>0&&(e=e.slice(n)),e}function C(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?x(t):["    (No stack trace)"],{message:n,stack:k(e)}}function E(t,e,n){if("undefined"!=typeof console){var r;if(M.isObject(t)){var i=t.stack;r=e+$(i,t)}else r=e+String(t);"function"==typeof I?I(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function j(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){q.throwLater(t)}"unhandledRejection"===t?et(t,n,r)||i||E(n,"Unhandled rejection "):et(t,r)}function T(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():M.toString(t);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+A(e)+">, no stack trace)"}function A(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function S(){return"function"==typeof ot}function O(t){var e=t.match(it);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function F(t,e){if(S()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,s=-1,c=0;c<i.length;++c){var l=O(i[c]);if(l){n=l.fileName,a=l.line;break}}for(var c=0;c<o.length;++c){var l=O(o[c]);if(l){r=l.fileName,s=l.line;break}}a<0||s<0||!n||!r||n!==r||a>=s||(rt=function(t){if(N.test(t))return!0;var e=O(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=s)})}}function P(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);ot(this,P),e>32&&this.uncycle()}var R,D,I,L=n._getDomain,q=n._async,U=t("./errors").Warning,M=t("./util"),H=M.canAttachTrace,N=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,V=/\((?:timers\.js):\d+:\d+\)/,z=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,B=null,$=null,X=!1,G=!(0==M.env("BLUEBIRD_DEBUG")),Q=!(0==M.env("BLUEBIRD_WARNINGS")||!G&&!M.env("BLUEBIRD_WARNINGS")),K=!(0==M.env("BLUEBIRD_LONG_STACK_TRACES")||!G&&!M.env("BLUEBIRD_LONG_STACK_TRACES")),W=0!=M.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Q||!!M.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=t._bitField&-1048577|524288},n.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),q.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){j("rejectionHandled",R,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),j("unhandledRejection",D,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return m(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=L();D="function"==typeof t?null===e?t:M.domainBind(e,t):void 0},n.onUnhandledRejectionHandled=function(t){var e=L();R="function"==typeof t?null===e?t:M.domainBind(e,t):void 0};var Y=function(){};n.longStackTraces=function(){if(q.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!at.longStackTraces&&S()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace;at.longStackTraces=!0,Y=function(){if(q.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,r.deactivateLongStackTraces(),q.enableTrampoline(),at.longStackTraces=!1},n.prototype._captureStackTrace=f,n.prototype._attachExtraTrace=v,r.activateLongStackTraces(),q.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return at.longStackTraces&&S()};var J=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return M.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!M.global.dispatchEvent(n)}}if("function"==typeof Event){var t=new Event("CustomEvent");return M.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!M.global.dispatchEvent(n)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),M.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!M.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),Z=function(){return M.isNode?function(){return e.emit.apply(e,arguments)}:M.global?function(t){var e="on"+t.toLowerCase(),n=M.global[e];return!!n&&(n.apply(M.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),tt={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:i},et=function(t){var e=!1;try{e=Z.apply(null,arguments)}catch(t){q.throwLater(t),e=!0}var n=!1;try{n=J(t,tt[t].apply(null,arguments))}catch(t){q.throwLater(t),n=!0}return n||e};n.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&Y()),"warnings"in t){var e=t.warnings;at.warnings=!!e,W=at.warnings,M.isObject(e)&&"wForgottenReturn"in e&&(W=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!at.cancellation){if(q.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=u,n.prototype._propagateFrom=h,n.prototype._onCancel=c,n.prototype._setOnCancel=l,n.prototype._attachCancellationCallback=s,n.prototype._execute=a,nt=h,at.cancellation=!0}"monitoring"in t&&(t.monitoring&&!at.monitoring?(at.monitoring=!0,n.prototype._fireEvent=et):!t.monitoring&&at.monitoring&&(at.monitoring=!1,n.prototype._fireEvent=o))},n.prototype._fireEvent=o,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var nt=p,rt=function(){return!1},it=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;M.inherits(P,Error),r.CapturedTrace=P,P.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;r<t;++r){var a=e[r].stack,s=n[a];if(void 0!==s&&s!==r){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var c=r>0?e[r-1]:this;s<t-1?(c._parent=e[s+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var l=c._length+1,u=r-2;u>=0;--u)e[u]._length=l,l++;return}}}},P.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=C(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(k(i.stack.split("\n"))),i=i._parent;w(r),b(r),M.notEnumerableProp(t,"stack",y(n,r)),M.notEnumerableProp(t,"__stackCleaned__",!0)}};var ot=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():T(e);
};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,B=t,$=e;var n=Error.captureStackTrace;return rt=function(t){return N.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return B=/@/,$=e,X=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(t){i="stack"in t}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?($=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?T(e):e.toString()},null):(B=t,$=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(I=function(t){console.warn(t)},M.isNode&&e.stderr.isTTY?I=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:M.isNode||"string"!=typeof(new Error).stack||(I=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var at={warnings:Q,longStackTraces:!1,cancellation:!1,monitoring:!1};return K&&n.longStackTraces(),{longStackTraces:function(){return at.longStackTraces},warnings:function(){return at.warnings},cancellation:function(){return at.cancellation},monitoring:function(){return at.monitoring},propagateFromFunction:function(){return nt},boundValueFunction:function(){return d},checkForgottenReturns:g,setBounds:F,warn:m,deprecated:_,CapturedTrace:P,fireDomEvent:J,fireGlobalEvent:Z}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return i(this,t,e,0)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,r){return i(t,r,e,0)._then(n,void 0,void 0,t,void 0)},t.mapSeries=r}},{}],12:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(h(this,"message","string"==typeof r?r:e),h(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return u(n,Error),n}function i(t){return this instanceof i?(h(this,"name","OperationalError"),h(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(h(this,"message",t.message),h(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,a,s=t("./es5"),c=s.freeze,l=t("./util"),u=l.inherits,h=l.notEnumerableProp,p=r("Warning","warning"),d=r("CancellationError","cancellation error"),f=r("TimeoutError","timeout error"),v=r("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(t){o=r("TypeError","type error"),a=r("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),_=0;_<g.length;++_)"function"==typeof Array.prototype[g[_]]&&(v.prototype[g[_]]=Array.prototype[g[_]]);s.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var m=0;v.prototype.toString=function(){var t=Array(4*m+1).join(" "),e="\n"+t+"AggregateError of:\n";m++,t=Array(4*m+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return m--,e},u(i,Error);var y=Error.__BluebirdErrorTypes__;y||(y=c({CancellationError:d,TimeoutError:f,OperationalError:i,RejectionError:i,AggregateError:v}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:y,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:y.CancellationError,OperationalError:y.OperationalError,TimeoutError:y.TimeoutError,AggregateError:y.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},c=function(t,e){return{value:t[e]}},l=function(t,e,n){return t[e]=n.value,t},u=function(t){return t},h=function(t){try{return Object(t).constructor.prototype}catch(t){return a}},p=function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}};e.exports={isArray:p,keys:s,names:s,defineProperty:l,getDescriptor:c,freeze:u,getPrototypeOf:h,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function i(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function a(){return c.call(this,this.promise._target()._settledValue())}function s(t){if(!o(this,t))return h.e=t,h}function c(t){var r=this.promise,c=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?c.call(r._boundValue()):c.call(r._boundValue(),t);if(void 0!==l){r._setReturnedNonUndefined();var p=n(l,r);if(p instanceof e){if(null!=this.cancelPromise){if(p._isCancelled()){var d=new u("late cancellation observer");return r._attachExtraTrace(d),h.e=d,h}p.isPending()&&p._attachCancellationCallback(new i(this))}return p._then(a,s,void 0,this,void 0)}}}return r.isRejected()?(o(this),h.e=t,h):(o(this),t)}var l=t("./util"),u=e.CancellationError,h=l.errorObj;return r.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,i){return"function"!=typeof t?this.then():this._then(n,i,void 0,new r(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,c,c)},e.prototype.tap=function(t){return this._passThrough(t,1,c)},r}},{"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=d(n[o])(t);if(r._popContext(),a===p){r._pushContext();var s=e.reject(p.e);return r._popContext(),s}var c=i(a,r);if(c instanceof e)return c}return null}function c(t,n,i,o){if(a.cancellation()){var s=new e(r),c=this._finallyPromise=new e(r);this._promise=s.lastly(function(){return c}),s._captureStackTrace(),s._setOnCancel(this)}else{var l=this._promise=new e(r);l._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}var l=t("./errors"),u=l.TypeError,h=t("./util"),p=h.errorObj,d=h.tryCatch,f=[];h.inherits(c,o),c.prototype._isResolved=function(){return null===this._promise},c.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},c.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n="undefined"!=typeof this._generator.return;if(n)this._promise._pushContext(),t=d(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=d(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},c.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=d(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=d(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},c.prototype.promise=function(){return this._promise},c.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},c.prototype._continue=function(t){var n=this._promise;if(t===p)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(t.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof e)&&(o=s(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var a=o._bitField;0===(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&a)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!==(16777216&a)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=c,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r((void 0),(void 0),n,i),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new u("expecting a function but got "+h.classString(t));f.push(t)},e.spawn=function(t){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new c(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=l();this._callback=null===i?e:u.domainBind(i,e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0)}function c(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+u.classString(n));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+u.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(i.concurrency)));a=i.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new s(t,n,a,o).promise()}var l=e._getDomain,u=t("./util"),h=u.tryCatch,p=u.errorObj,d=e._async;u.inherits(s,n),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),s=this._preservedValues,c=this._limit;if(n<0){if(n=n*-1-1,r[n]=t,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return r[n]=t,this._queue.push(n),!1;null!==s&&(s[n]=t);var l=this._promise,u=this._callback,d=l._boundValue();l._pushContext();var f=h(u).call(d,t,n,o),v=l._popContext();if(a.checkForgottenReturns(f,v,null!==s?"Promise.filter":"Promise.map",l),f===p)return this._reject(f.e),!0;var g=i(f,this._promise);if(g instanceof e){g=g._target();var _=g._bitField;if(0===(50397184&_))return c>=1&&this._inFlight++,r[n]=g,g._proxy(this,(n+1)*-1),!1;if(0===(33554432&_))return 0!==(16777216&_)?(this._reject(g._reason()),!0):(this._cancel(),!0);f=g._value()}r[n]=f}var m=++this._totalResolved;return m>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return c(this,t,e,null)},e.map=function(t,e,n,r){return c(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util"),s=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+a.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var c;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],u=arguments[2];c=a.isArray(l)?s(t).apply(u,l):s(t).call(u,l)}else c=s(t)();var h=r._popContext();return o.checkForgottenReturns(c,h,"Promise.try",r),r._resolveFromSyncValue(c),r},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&u.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new l(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=u.keys(t),i=0;i<n.length;++i){var o=n[i];h.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(s(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(r);t=null}}}var a=t("./util"),s=a.maybeWrapAsError,c=t("./errors"),l=c.OperationalError,u=t("./es5"),h=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=s(e).apply(n._boundValue(),[null].concat(t));i===c&&a.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?s(e).call(r,null):s(e).call(r,null,t);i===c&&a.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=s(e).call(n._boundValue(),t);i===c&&a.throwLater(i.e)}var o=t("./util"),a=e._async,s=o.tryCatch,c=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,n,r){"use strict";n.exports=function(){function r(){}function i(t,e){if("function"!=typeof e)throw new y("expecting a function but got "+f.classString(e));if(t.constructor!==o)throw new y("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function o(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==w&&(i(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function a(t){this.promise._resolveCallback(t)}function s(t){this.promise._rejectCallback(t,!1)}function c(t){var e=new o(w);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var l,u=function(){return new y("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},h=function(){return new o.PromiseInspection(this._target())},p=function(t){return o.reject(new y(t))},d={},f=t("./util");l=f.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},f.notEnumerableProp(o,"_getDomain",l);var v=t("./es5"),g=t("./async"),_=new g;v.defineProperty(o,"_async",{value:_});var m=t("./errors"),y=o.TypeError=m.TypeError;o.RangeError=m.RangeError;var b=o.CancellationError=m.CancellationError;o.TimeoutError=m.TimeoutError,o.OperationalError=m.OperationalError,o.RejectionError=m.OperationalError,o.AggregateError=m.AggregateError;var w=function(){},k={},x={},C=t("./thenables")(o,w),E=t("./promise_array")(o,w,C,p,r),j=t("./context")(o),T=j.create,A=t("./debuggability")(o,j),S=(A.CapturedTrace,t("./finally")(o,C)),O=t("./catch_filter")(x),F=t("./nodeback"),P=f.errorObj,R=f.tryCatch;return o.prototype.toString=function(){return"[object Promise]"},o.prototype.caught=o.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var o=arguments[n];if(!f.isObject(o))return p("expecting an object but got A catch statement predicate "+f.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,O(r,t,this))}return this.then(void 0,t)},o.prototype.reflect=function(){return this._then(h,h,void 0,this,void 0)},o.prototype.then=function(t,e){if(A.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+f.classString(t);arguments.length>1&&(n+=", "+f.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},o.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},o.prototype.spread=function(t){return"function"!=typeof t?p("expecting a function but got "+f.classString(t)):this.all()._then(t,void 0,void 0,k,void 0)},o.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},o.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new E(this).promise()},o.prototype.error=function(t){return this.caught(f.originatesFromRejection,t)},o.getNewLibraryCopy=n.exports,o.is=function(t){return t instanceof o},o.fromNode=o.fromCallback=function(t){var e=new o(w);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=R(t)(F(e,n));return r===P&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},o.all=function(t){return new E(t).promise()},o.cast=function(t){var e=C(t);return e instanceof o||(e=new o(w),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},o.resolve=o.fulfilled=o.cast,o.reject=o.rejected=function(t){var e=new o(w);return e._captureStackTrace(),e._rejectCallback(t,!0),e},o.setScheduler=function(t){if("function"!=typeof t)throw new y("expecting a function but got "+f.classString(t));return _.setScheduler(t)},o.prototype._then=function(t,e,n,r,i){var a=void 0!==i,s=a?i:new o(w),c=this._target(),u=c._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&u)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var h=l();if(0!==(50397184&u)){var p,d,v=c._settlePromiseCtx;0!==(33554432&u)?(d=c._rejectionHandler0,p=t):0!==(16777216&u)?(d=c._fulfillmentHandler0,p=e,c._unsetRejectionIsUnhandled()):(v=c._settlePromiseLateCancellationObserver,d=new b("late cancellation observer"),c._attachExtraTrace(d),p=e),_.invoke(v,c,{handler:null===h?p:"function"==typeof p&&f.domainBind(h,p),promise:s,receiver:r,value:d})}else c._addCallbacks(t,e,s,r,h);return s},o.prototype._length=function(){return 65535&this._bitField},o.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},o.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},o.prototype._setLength=function(t){this._bitField=this._bitField&-65536|65535&t},o.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},o.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},o.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},o.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},o.prototype._isFinal=function(){return(4194304&this._bitField)>0},o.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},o.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},o.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},o.prototype._setAsyncGuaranteed=function(){_.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},o.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==d)return void 0===e&&this._isBound()?this._boundValue():e},o.prototype._promiseAt=function(t){return this[4*t-4+2]},o.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},o.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},o.prototype._boundValue=function(){},o.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=d),this._addCallbacks(e,n,r,i,null)},o.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=d),this._addCallbacks(n,r,i,o,null)},o.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:f.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:f.domainBind(i,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=null===i?t:f.domainBind(i,t)),"function"==typeof e&&(this[a+1]=null===i?e:f.domainBind(i,e))}return this._setLength(o+1),o},o.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},o.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(u(),!1);var n=C(t,this);if(!(n instanceof o))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(u());var i=r._bitField;if(0===(50397184&i)){var a=this._length();a>0&&r._migrateCallback0(this);for(var s=1;s<a;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&i))this._fulfill(r._value());else if(0!==(16777216&i))this._reject(r._reason());else{var c=new b("late cancellation observer");r._attachExtraTrace(c),this._reject(c)}}},o.prototype._rejectCallback=function(t,e,n){var r=f.ensureErrorObject(t),i=r===t;if(!i&&!n&&A.warnings()){var o="a promise was rejected with a non-error: "+f.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},o.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)},o.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===k?n&&"number"==typeof n.length?o=R(t).apply(this._boundValue(),n):(o=P,o.e=new y("cannot .spread() a non-array: "+f.classString(n))):o=R(t).call(e,n);var a=r._popContext();i=r._bitField,0===(65536&i)&&(o===x?r._reject(n):o===P?r._rejectCallback(o.e,!1):(A.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},o.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},o.prototype._followee=function(){return this._rejectionHandler0},o.prototype._setFollowee=function(t){this._rejectionHandler0=t},o.prototype._settlePromise=function(t,e,n,i){var a=t instanceof o,s=this._bitField,c=0!==(134217728&s);0!==(65536&s)?(a&&t._invokeInternalOnCancel(),n instanceof S&&n.isFinallyHandler()?(n.cancelPromise=t,R(e).call(n,i)===P&&t._reject(P.e)):e===h?t._fulfill(h.call(n)):n instanceof r?n._promiseCancelled(t):a||t instanceof E?t._cancel():n.cancel()):"function"==typeof e?a?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,i,t)):e.call(n,i,t):n instanceof r?n._isResolved()||(0!==(33554432&s)?n._promiseFulfilled(i,t):n._promiseRejected(i,t)):a&&(c&&t._setAsyncGuaranteed(),0!==(33554432&s)?t._fulfill(i):t._reject(i))},o.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"==typeof e?n instanceof o?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof o&&n._reject(i)},o.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},o.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},o.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},o.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=u();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():_.settlePromises(this))}},o.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?_.fatalError(t,f.isNode):void((65535&e)>0?_.settlePromises(this):this._ensurePossibleRejectionHandled())},o.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},o.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},o.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},o.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},o.defer=o.pending=function(){A.deprecated("Promise.defer","new Promise");var t=new o(w);return{promise:t,resolve:a,reject:s}},f.notEnumerableProp(o,"_makeSelfResolutionError",u),t("./method")(o,w,C,p,A),t("./bind")(o,w,C,A),t("./cancel")(o,E,p,A),t("./direct_resolve")(o),t("./synchronous_inspection")(o),t("./join")(o,E,C,w,_,l),o.Promise=o,o.version="3.4.6",t("./map.js")(o,E,p,C,w,A),t("./call_get.js")(o),t("./using.js")(o,p,C,T,w,A),t("./timers.js")(o,w,A),t("./generators.js")(o,p,w,C,r,A),t("./nodeify.js")(o),t("./promisify.js")(o,w),t("./props.js")(o,E,C,p),t("./race.js")(o,w,C,p),t("./reduce.js")(o,E,p,C,w,A),t("./settle.js")(o,E,A),t("./some.js")(o,E,p),t("./filter.js")(o,w),t("./each.js")(o,w),t("./any.js")(o),f.toFastProperties(o),f.toFastProperties(o.prototype),c({a:1}),c({b:2}),c({c:3}),c(1),c(function(){}),c(void 0),c(!1),c(new o(w)),A.setBounds(g.firstLineError,f.lastLineError),o}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function a(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var c=t("./util");c.isArray;return c.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(n,o){var s=r(this._values,this._promise);if(s instanceof e){s=s._target();var l=s._bitField;if(this._values=s,0===(50397184&l))return this._promise._setAsyncGuaranteed(),s._then(t,this._reject,void 0,this,o);if(0===(33554432&l))return 0!==(16777216&l)?this._reject(s._reason()):this._cancel();s=s._value()}if(s=c.asArray(s),null===s){var u=i("expecting an array or an iterable object but got "+c.classString(s)).reason();return void this._promise._rejectCallback(u,!1)}return 0===s.length?void(o===-5?this._resolveEmptyArray():this._resolve(a(o))):void this._iterate(s)},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<n;++s){var c=r(t[s],i);c instanceof e?(c=c._target(),a=c._bitField):a=null,o?null!==a&&c.suppressUnhandledRejections():null!==a?0===(50397184&a)?(c._proxy(this,s),this._values[s]=c):o=0!==(33554432&a)?this._promiseFulfilled(c._value(),s):0!==(16777216&a)?this._promiseRejected(c._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(c,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,
this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!k.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(t){return!1}}function o(t,e,n){var r=d.getDataPropertyOrDefault(t,e+n,b);return!!r&&i(r)}function a(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new m("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function s(t,e,n,r){for(var s=d.inheritedDataKeys(t),c=[],l=0;l<s.length;++l){var u=s[l],h=t[u],p=r===x||x(u,h,t);"function"!=typeof h||i(h)||o(t,u,e)||!r(u,h,t,p)||c.push(u,h)}return a(c,e,n),c}function c(t,r,i,o,a,s){function c(){var i=r;r===p&&(i=this);var o=new e(n);o._captureStackTrace();var a="string"==typeof u&&this!==l?this[u]:t,c=f(o,s);try{a.apply(i,v(arguments,c))}catch(t){o._rejectCallback(g(t),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var l=function(){return this}(),u=t;return"string"==typeof u&&(t=o),d.notEnumerableProp(c,"__isPromisified__",!0),c}function l(t,e,n,r,i){for(var o=new RegExp(C(e)+"$"),a=s(t,e,o,n),c=0,l=a.length;c<l;c+=2){var u=a[c],h=a[c+1],f=u+e;if(r===E)t[f]=E(u,p,u,h,e,i);else{var v=r(h,function(){return E(u,p,u,h,e,i)});d.notEnumerableProp(v,"__isPromisified__",!0),t[f]=v}}return d.toFastProperties(t),t}function u(t,e,n){return E(t,e,void 0,t,null,n)}var h,p={},d=t("./util"),f=t("./nodeback"),v=d.withAppended,g=d.maybeWrapAsError,_=d.canEvaluate,m=t("./errors").TypeError,y="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],k=new RegExp("^(?:"+w.join("|")+")$"),x=function(t){return d.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},C=function(t){return t.replace(/([$])/,"\\$")},E=_?h:c;e.promisify=function(t,e){if("function"!=typeof t)throw new m("expecting a function but got "+d.classString(t));if(i(t))return t;e=Object(e);var n=void 0===e.context?p:e.context,o=!!e.multiArgs,a=u(t,n,o);return d.copyDescriptors(t,a,r),a},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new m("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r=y);var i=e.filter;"function"!=typeof i&&(i=x);var o=e.promisifier;if("function"!=typeof o&&(o=E),!d.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=d.inheritedDataKeys(t),s=0;s<a.length;++s){var c=t[a[s]];"constructor"!==a[s]&&d.isClass(c)&&(l(c.prototype,r,i,o,n),l(c,r,i,o,n))}return l(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(void 0!==s&&t instanceof s)e=h(t),n=!0;else{var r=u.keys(t),i=r.length;e=new Array(2*i);for(var o=0;o<i;++o){var a=r[o];e[o]=t[a],e[o+i]=a}}this.constructor$(e),this._isMap=n,this._init$(void 0,-3)}function a(t){var n,a=r(t);return l(a)?(n=a instanceof e?a._then(e.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof e&&n._propagateFrom(a,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,c=t("./util"),l=c.isObject,u=t("./es5");"function"==typeof Map&&(s=Map);var h=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),p=function(t){for(var e=new s,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};c.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=p(this._values);else{r={};for(var i=this.length(),o=0,a=this.length();o<a;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return a(this)},e.props=function(t){return a(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var c=r(t);if(c instanceof e)return s(c);if(t=a.asArray(t),null===t)return i("expecting an array or an iterable object but got "+a.classString(t));var l=new e(n);void 0!==o&&l._propagateFrom(o,3);for(var u=l._fulfill,h=l._reject,p=0,d=t.length;p<d;++p){var f=t[p];(void 0!==f||p in t)&&e.cast(f)._then(u,h,void 0,l,null)}return l}var a=t("./util"),s=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,n,r,i){this.constructor$(t);var a=p();this._fn=null===a?n:d.domainBind(a,n),void 0!==r&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,i===o?this._eachValues=Array(this._length):0===i?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function l(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+d.classString(e));var o=new s(t,e,n,i);return o.promise()}function u(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(h,void 0,void 0,this,void 0)):h.call(this,n)}function h(t){var n=this.array,r=n._promise,i=f(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length),o instanceof e&&(n._currentCancellable=o);var s=r._popContext();return a.checkForgottenReturns(o,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var p=e._getDomain,d=t("./util"),f=d.tryCatch;d.inherits(s,n),s.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},s.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},s.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},s.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(u,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(c,c,void 0,n,this)},e.prototype.reduce=function(t,e){return l(this,t,e,null)},e.reduce=function(t,e,n,r){return l(t,e,n,r)}}},{"./util":36}],29:[function(t,n,r){"use strict";var o,a=t("./util"),s=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},c=a.getNativePromise();if(a.isNode&&"undefined"==typeof MutationObserver){var l=i.setImmediate,u=e.nextTick;o=a.isRecentNode?function(t){l.call(i,t)}:function(t){u.call(e,t)}}else if("function"==typeof c&&"function"==typeof c.resolve){var h=c.resolve();o=function(t){h.then(t)}}else o="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:s:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}();n.exports=o},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection,a=t("./util");a.inherits(i,n),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var a=t("./util"),s=t("./errors").RangeError,c=t("./errors").AggregateError,l=a.isArray,u={};a.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=l(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new c,e=this.length();e<this._values.length;++e)this._values[e]!==u&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new s(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(u(t)){if(t instanceof e)return t;var i=o(t);if(i===l){r&&r._pushContext();var c=e.reject(i.e);return r&&r._popContext(),c}if("function"==typeof i){if(a(t)){var c=new e(n);return t._then(c._fulfill,c._reject,void 0,c,null),c}return s(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(t){return l.e=t,l}}function a(t){try{return h.call(t,"_promise0")}catch(t){return!1}}function s(t,r,i){function o(t){s&&(s._resolveCallback(t),s=null)}function a(t){s&&(s._rejectCallback(t,h,!0),s=null)}var s=new e(n),u=s;i&&i._pushContext(),s._captureStackTrace(),i&&i._popContext();var h=!0,p=c.tryCatch(r).call(t,o,a);return h=!1,s&&p===l&&(s._rejectCallback(p.e,!0,!0),s=null),u}var c=t("./util"),l=c.errorObj,u=c.isObject,h={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function a(t){throw clearTimeout(this.handle),t}var s=t("./util"),c=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(t){return u(+this).thenReturn(t)},u=e.delay=function(t,o){var a,s;return void 0!==o?(a=e.resolve(o)._then(l,null,null,t,void 0),r.cancellation()&&o instanceof e&&a._setOnCancel(o)):(a=new e(n),s=setTimeout(function(){a._fulfill()},+t),r.cancellation()&&a._setOnCancel(new i(s)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};e.prototype.delay=function(t){return u(t,this)};var h=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new c("operation timed out"):new c(e),s.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};e.prototype.timeout=function(t,e){t=+t;var n,s,c=new i(setTimeout(function(){n.isPending()&&h(n,e,s)},t));return r.cancellation()?(s=this.then(),n=s._then(o,a,void 0,c,void 0),n._setOnCancel(c)):n=this._then(o,a,void 0,c,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t){setTimeout(function(){throw t},0)}function c(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function l(t,n){function i(){if(a>=l)return u._fulfill();var o=c(t[a++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(t){return s(t)}if(o instanceof e)return o._then(i,s,null,null,null)}i()}var a=0,l=t.length,u=new e(o);return i(),u}function u(t,e,n){this._data=t,this._promise=e,this._context=n}function h(t,e,n){this.constructor$(t,e,n)}function p(t){return u.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function d(t){this.length=t,this.promise=null,this[t-1]=null}var f=t("./util"),v=t("./errors").TypeError,g=t("./util").inherits,_=f.errorObj,m=f.tryCatch,y={};u.prototype.data=function(){return this._data},u.prototype.promise=function(){return this._promise},u.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():y},u.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==y?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},u.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},g(h,u),h.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},d.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+f.classString(i));var o,s=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,s=!1):(o=arguments,t--);for(var c=new d(t),h=0;h<t;++h){var v=o[h];if(u.isDisposer(v)){var g=v;v=v.promise(),v._setDisposable(g)}else{var y=r(v);y instanceof e&&(v=y._then(p,null,null,{resources:c,index:h},void 0))}c[h]=v}for(var b=new Array(c.length),h=0;h<b.length;++h)b[h]=e.resolve(c[h]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return _.e=n.error(),_;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}k._pushContext(),i=m(i);var r=s?i.apply(void 0,t):i(t),o=k._popContext();return a.checkForgottenReturns(r,o,"Promise.using",k),r}),k=w.lastly(function(){var t=new e.PromiseInspection(w);return l(c,t)});return c.promise=k,k._setOnCancel(c),k},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new h(t,this,i());throw new v}}},{"./errors":12,"./util":36}],36:[function(t,n,r){"use strict";function o(){try{var t=F;return F=null,t.apply(this,arguments)}catch(t){return O.e=t,O}}function a(t){return F=t,o}function s(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function c(t){return"function"==typeof t||"object"==typeof t&&null!==t}function l(t){return s(t)?new Error(m(t)):t}function u(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function h(t,e,n){if(!A.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function p(t,e,n){if(s(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return A.defineProperty(t,e,r),t}function d(t){throw t}function f(t){try{if("function"==typeof t){var e=A.names(t.prototype),n=A.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=I.test(t+"")&&A.names(t).length>0;if(n||r||i)return!0}return!1}catch(t){return!1}}function v(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function g(t){return L.test(t)}function _(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function m(t){try{return t+""}catch(t){return"[no string representation]"}}function y(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function b(t){try{p(t,"isOperational",!0)}catch(t){}}function w(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0)}function k(t){return y(t)&&A.propertyIsWritable(t,"stack")}function x(t){return{}.toString.call(t)}function C(t,e,n){for(var r=A.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{A.defineProperty(e,o,A.getDescriptor(t,o))}catch(t){}}}function E(t,n){return H?e.env[t]:n}function j(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function T(t,e){return t.bind(e)}var A=t("./es5"),S="undefined"==typeof navigator,O={e:{}},F,P="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof i?i:void 0!==this?this:null,R=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},D=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(A.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(t){return r}for(var a=0;a<o.length;++a){var s=o[a];if(!i[s]){i[s]=!0;var c=Object.getOwnPropertyDescriptor(t,s);null!=c&&null==c.get&&null==c.set&&r.push(s)}}t=A.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<t.length;++a)if(r.call(t[a],o))continue t;i.push(o)}return i}}(),I=/this\s*\.\s*\S+\s*=/,L=/^[a-z$_][a-z$_0-9]*$/i,q=function(){return"stack"in new Error?function(t){return k(t)?t:new Error(m(t))}:function(t){if(k(t))return t;try{throw new Error(m(t))}catch(t){return t}}}(),U=function(t){return A.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var M="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};U=function(t){return A.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?M(t):null}}var H="undefined"!=typeof e&&"[object process]"===x(e).toLowerCase(),N={isClass:f,isIdentifier:g,inheritedDataKeys:D,getDataPropertyOrDefault:h,thrower:d,isArray:A.isArray,asArray:U,notEnumerableProp:p,isPrimitive:s,isObject:c,isError:y,canEvaluate:S,errorObj:O,tryCatch:a,inherits:R,withAppended:u,maybeWrapAsError:l,toFastProperties:v,filledRange:_,toString:m,canAttachTrace:k,ensureErrorObject:q,originatesFromRejection:w,markAsOriginatingFromRejection:b,classString:x,copyDescriptors:C,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:H,env:E,global:P,getNativePromise:j,domainBind:T};N.isRecentNode=N.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),N.isNode&&N.toFastProperties(e);try{throw new Error}catch(t){N.lastLineError=t}n.exports=N},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:24}],18:[function(t,e,n){function r(t){return Array.prototype.slice.call(t,0)}function i(t,e){function n(t){var e=s.findIndex(function(e){return e.key===t});s.splice(e,1)}function i(t,e){var r=a.apply(null,t);e.then(function(t){return n(r),t}).catch(function(t){throw n(r),t}),s.push({key:r,promise:e})}function o(t){var e=a.apply(null,t),n=s.find(function(t){return t.key===e});return n?n.promise:null}if("function"!=typeof t)throw new TypeError("fn MUST be a function");if("object"!=typeof e)throw new TypeError("options MUST be an object");var a=e.cacheKey;if("function"!=typeof a)throw new TypeError("cacheKey MUST be a function");var s=[],c=function(){var e=r(arguments),n=o(e);return n||(n=t.apply(null,e),i(e,n)),n};return c}e.exports=i},{}],19:[function(t,e,n){function r(t){if(t)return i(t)}function i(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}"undefined"!=typeof e&&(e.exports=r),r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],20:[function(t,e,n){function r(t,e){var n=t.get(e);if("undefined"==typeof n&&(n=[],t.set(e,n)),!Array.isArray(n))throw new TypeError("value at "+e+" is not an array");return n}function i(t,e,n){return n=n||function(t){return t===e},t.findIndex(n)}n.arrayPush=function(t,e){var n=r(this,t),i=n.slice(0);n.push(e);var o={key:t,oldValue:i,newValue:n,kind:"array.add",item:e,index:n.length-1};this.emit("change",o),this.emit("change:"+t,o)},n.arrayPop=function(t){r(this,t)},n.arrayInsertUnique=function(t,e,n,o){var a=r(this,t),s=i(a,n,o);if(!s){var c=a.slice(0);a.splice(e,0,n);var l={key:t,oldValue:c,newValue:a,kind:"array.add",item:n,index:e};this.emit("change",l),this.emit("change:"+t,l)}},n.arrayPushUnique=function(t,e,n){var o=r(this,t),a=i(o,e,n);if(a===-1){var s=o.slice(0);o.push(e);var c={key:t,oldValue:s,newValue:o,kind:"array.add",item:e,index:o.length-1};this.emit("change",c),this.emit("change:"+t,c)}},n.arrayRemove=function(t,e,n){var o=r(this,t),a=i(o,e,n);if(a!==-1){var s=o.slice(0),c=o.splice(a,1)[0],l={key:t,oldValue:s,newValue:o,kind:"array.remove",index:a,item:c};this.emit("change",l),this.emit("change:"+t,l)}}},{}],21:[function(t,e,n){function r(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function i(t){this.data={},this.set(t)}const o=t("util"),a=t("events");o.inherits(i,a),i.prototype.set=function(){if("object"==typeof arguments[0])r(arguments[0],function(t,e){var n=this.data[e];if(t!==n){var r={key:e,oldValue:n,newValue:t};this.data[e]=t,this.emit("change",r),this.emit("change:"+e,r)}}.bind(this));else{var t=arguments[0],e=arguments[1],n=this.data[t];if(e!==n){var i={key:t,oldValue:n,newValue:e};this.data[t]=e,this.emit("change",i),this.emit("change:"+t,i)}}},i.prototype.unset=function(t){var e=this.data[t];if(void 0!==e){var n={key:t,oldValue:e,newValue:void 0};delete this.data[t],this.emit("change",n),this.emit("change:"+t,n)}},i.prototype.get=function(t){return this.data[t]},Object.assign(i.prototype,t("./array-methods")),e.exports=i},{"./array-methods":20,events:23,util:31}],22:[function(e,n,r){!function(){function e(t){for(;t;){if("DIALOG"==t.nodeName.toUpperCase())return t;t=t.parentElement}return null}function r(t){t&&t.blur&&t!=document.body&&t.blur()}function i(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return!0;return!1}function o(t){if(this.dialog_=t,this.replacedStyleTop_=!1,this.openAsModal_=!1,t.hasAttribute("role")||t.setAttribute("role","dialog"),t.show=this.show.bind(this),t.showModal=this.showModal.bind(this),t.close=this.close.bind(this),"returnValue"in t||(t.returnValue=""),this.maybeHideModal=this.maybeHideModal.bind(this),"MutationObserver"in window){var e=new MutationObserver(this.maybeHideModal);e.observe(t,{attributes:!0,attributeFilter:["open"]})}else t.addEventListener("DOMAttrModified",this.maybeHideModal);Object.defineProperty(t,"open",{set:this.setOpen.bind(this),get:t.hasAttribute.bind(t,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdropClick_=this.backdropClick_.bind(this)}var a=window.CustomEvent;a&&"object"!=typeof a||(a=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!!e.bubbles,!!e.cancelable,e.detail||null),n},a.prototype=window.Event.prototype),o.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.openAsModal_&&(this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.removeEventListener("click",this.backdropClick_),this.backdrop_.parentElement&&this.backdrop_.parentElement.removeChild(this.backdrop_),s.dm.removeDialog(this)))},setOpen:function(t){t?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(t){var e=document.createEvent("MouseEvents");e.initMouseEvent(t.type,t.bubbles,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),this.dialog_.dispatchEvent(e),t.stopPropagation()},focus_:function(){var t=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!t){var e=["button","input","keygen","select","textarea"],n=e.map(function(t){return t+":not([disabled])"});n.push('[tabindex]:not([disabled]):not([tabindex=""])'),t=this.dialog_.querySelector(n.join(", "))}r(document.activeElement),t&&t.focus()},updateZIndex:function(t,e){this.backdrop_.style.zIndex=t,this.dialog_.style.zIndex=e},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!s.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");
this.show(),this.openAsModal_=!0,s.needsCentering(this.dialog_)?(console.info("repositioning what"),s.reposition(this.dialog_),this.replacedStyleTop_=!0):(console.info("NOT repositioning"),this.replacedStyleTop_=!1),this.backdrop_.addEventListener("click",this.backdropClick_),this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.dialog_.addEventListener("DOMNodeRemoved",function(t){console.info("dialog itself removed",t)})},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var e=new a("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(e)}};var s={};s.reposition=function(t){var e=document.body.scrollTop||document.documentElement.scrollTop,n=e+(window.innerHeight-t.offsetHeight)/2;t.style.top=Math.max(e,n)+"px"},s.isInlinePositionSetByStylesheet=function(t){for(var e=0;e<document.styleSheets.length;++e){var n=document.styleSheets[e],r=null;try{r=n.cssRules}catch(t){}if(r)for(var o=0;o<r.length;++o){var a=r[o],s=null;try{s=document.querySelectorAll(a.selectorText)}catch(t){}if(s&&i(s,t)){var c=a.style.getPropertyValue("top"),l=a.style.getPropertyValue("bottom");if(c&&"auto"!=c||l&&"auto"!=l)return!0}}}return!1},s.needsCentering=function(t){var e=window.getComputedStyle(t);return"absolute"==e.position&&(!("auto"!=t.style.top&&""!=t.style.top||"auto"!=t.style.bottom&&""!=t.style.bottom)&&!s.isInlinePositionSetByStylesheet(t))},s.forceRegisterDialog=function(t){if(t.showModal&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",t),"DIALOG"!=t.nodeName.toUpperCase())throw new Error("Failed to register dialog: The element is not a dialog.");new o(t)},s.registerDialog=function(t){t.showModal||s.forceRegisterDialog(t)},s.DialogManager=function(){this.pendingDialogStack=[],this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){t.stopPropagation()}),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.handleRemove_=this.handleRemove_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150},s.DialogManager.prototype.topDialogElement=function(){if(this.pendingDialogStack.length){var t=this.pendingDialogStack[this.pendingDialogStack.length-1];return t.dialog}return null},s.DialogManager.prototype.blockDocument=function(){document.body.appendChild(this.overlay),document.body.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),document.addEventListener("DOMNodeRemoved",this.handleRemove_)},s.DialogManager.prototype.unblockDocument=function(){document.body.removeChild(this.overlay),document.body.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),document.removeEventListener("DOMNodeRemoved",this.handleRemove_)},s.DialogManager.prototype.updateStacking=function(){for(var t=this.zIndexLow_,e=0;e<this.pendingDialogStack.length;e++)e==this.pendingDialogStack.length-1&&(this.overlay.style.zIndex=t++),this.pendingDialogStack[e].updateZIndex(t++,t++)},s.DialogManager.prototype.handleFocus_=function(t){var n=e(t.target);if(n!=this.topDialogElement())return t.preventDefault(),t.stopPropagation(),r(t.target),!1},s.DialogManager.prototype.handleKey_=function(t){if(27==t.keyCode){t.preventDefault(),t.stopPropagation();var e=new a("cancel",{bubbles:!1,cancelable:!0}),n=this.topDialogElement();n.dispatchEvent(e)&&n.close()}},s.DialogManager.prototype.handleRemove_=function(t){if("DIALOG"==t.target.nodeName.toUpperCase()){var e=t.target;e.open&&(console.info("dialog is removed",t),this.pendingDialogStack.some(function(t){if(t.dialog==e)return t.maybeHideModal(),!0}))}},s.DialogManager.prototype.pushDialog=function(t){var e=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=e)&&(this.pendingDialogStack.push(t),1==this.pendingDialogStack.length&&this.blockDocument(),this.updateStacking(),!0)},s.DialogManager.prototype.removeDialog=function(t){var e=this.pendingDialogStack.indexOf(t);e!=-1&&(this.pendingDialogStack.splice(e,1),this.updateStacking(),0==this.pendingDialogStack.length&&this.unblockDocument())},s.dm=new s.DialogManager,document.addEventListener("submit",function(t){var n=t.target;if(n&&n.hasAttribute("method")&&"dialog"==n.getAttribute("method").toLowerCase()){t.preventDefault();var r=e(t.target);if(r){var i,o=[document.activeElement,t.explicitOriginalTarget],a=["BUTTON","INPUT"];o.some(function(e){if(e&&e.form==t.target&&a.indexOf(e.nodeName.toUpperCase())!=-1)return i=e.value,!0}),r.close(i)}}},!0),s.forceRegisterDialog=s.forceRegisterDialog,s.registerDialog=s.registerDialog,"function"==typeof t&&"amd"in t?t(function(){return s}):"object"==typeof n&&"object"==typeof n.exports?n.exports=s:window.dialogPolyfill=s}()},{}],23:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,c,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(a(n))for(o=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,c=0;c<r;c++)l[c].apply(this,o);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(n)){for(s=o;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],24:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function a(t){if(p===clearTimeout)return clearTimeout(t);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function s(){g&&f&&(g=!1,f.length?v=f.concat(v):_=-1,v.length&&c())}function c(){if(!g){var t=o(s);g=!0;for(var e=v.length;e;){for(f=v,v=[];++_<e;)f&&f[_].run();_=-1,e=v.length}f=null,g=!1,a(t)}}function l(t,e){this.fun=t,this.array=e}function u(){}var h,p,d=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(t){h=r}try{p="function"==typeof clearTimeout?clearTimeout:i}catch(t){p=i}}();var f,v=[],g=!1,_=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];v.push(new l(t,e)),1!==v.length||g||o(c)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],25:[function(t,e,n){function r(){}function i(t){if(!_(t))return t;var e=[];for(var n in t)o(e,n,t[n]);return e.join("&")}function o(t,e,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){o(t,e,n)});else if(_(n))for(var r in n)o(t,e+"["+r+"]",n[r]);else t.push(encodeURIComponent(e)+"="+encodeURIComponent(n));else null===n&&t.push(encodeURIComponent(e))}function a(t){for(var e,n,r={},i=t.split("&"),o=0,a=i.length;o<a;++o)e=i[o],n=e.indexOf("="),n==-1?r[decodeURIComponent(e)]="":r[decodeURIComponent(e.slice(0,n))]=decodeURIComponent(e.slice(n+1));return r}function s(t){var e,n,r,i,o=t.split(/\r?\n/),a={};o.pop();for(var s=0,c=o.length;s<c;++s)n=o[s],e=n.indexOf(":"),r=n.slice(0,e).toLowerCase(),i=y(n.slice(e+1)),a[r]=i;return a}function c(t){return/[\/+]json\b/.test(t)}function l(t){return t.split(/ *; */).shift()}function u(t){return t.split(/ *; */).reduce(function(t,e){var n=e.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(t[r]=i),t},{})}function h(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this._setStatusProperties(this.xhr.status),this.header=this.headers=s(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function p(t,e){var n=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new h(n)}catch(e){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=e,t.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,t.statusCode=n.xhr&&n.xhr.status?n.xhr.status:null,n.callback(t)}n.emit("response",e);var r;try{(e.status<200||e.status>=300)&&(r=new Error(e.statusText||"Unsuccessful HTTP response"),r.original=t,r.response=e,r.status=e.status)}catch(t){r=t}r?n.callback(r,e):n.callback(null,e)})}function d(t,e){var n=m("DELETE",t);return e&&n.end(e),n}var f;"undefined"!=typeof window?f=window:"undefined"!=typeof self?f=self:(console.warn("Using browser-only version of superagent in non-browser environment"),f=this);var v=t("emitter"),g=t("./request-base"),_=t("./is-object"),m=e.exports=t("./request").bind(null,p);m.getXHR=function(){if(!(!f.XMLHttpRequest||f.location&&"file:"==f.location.protocol&&f.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only verison of superagent could not find XHR")};var y="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};m.serializeObject=i,m.parseString=a,m.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},m.serialize={"application/x-www-form-urlencoded":i,"application/json":JSON.stringify},m.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},h.prototype.get=function(t){return this.header[t.toLowerCase()]},h.prototype._setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=l(e);var n=u(e);for(var r in n)this[r]=n[r]},h.prototype._parseBody=function(t){var e=m.parse[this.type];return!e&&c(this.type)&&(e=m.parse["application/json"]),e&&t&&(t.length||t instanceof Object)?e(t):null},h.prototype._setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},h.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=e,i.url=n,i},m.Response=h,v(p.prototype);for(var b in g)p.prototype[b]=g[b];p.prototype.type=function(t){return this.set("Content-Type",m.types[t]||t),this},p.prototype.responseType=function(t){return this._responseType=t,this},p.prototype.accept=function(t){return this.set("Accept",m.types[t]||t),this},p.prototype.auth=function(t,e,n){switch(n||(n={type:"basic"}),n.type){case"basic":var r=btoa(t+":"+e);this.set("Authorization","Basic "+r);break;case"auto":this.username=t,this.password=e}return this},p.prototype.query=function(t){return"string"!=typeof t&&(t=i(t)),t&&this._query.push(t),this},p.prototype.attach=function(t,e,n){return this._getFormData().append(t,e,n||e.name),this},p.prototype._getFormData=function(){return this._formData||(this._formData=new f.FormData),this._formData},p.prototype.callback=function(t,e){var n=this._callback;this.clearTimeout(),n(t,e)},p.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},p.prototype._timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},p.prototype._appendQueryString=function(){var t=this._query.join("&");t&&(this.url+=~this.url.indexOf("?")?"&"+t:"?"+t)},p.prototype.end=function(t){var e=this,n=this.xhr=m.getXHR(),i=this._timeout,o=this._formData||this._data;this._callback=t||r,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(e){t=0}if(0==t){if(e.timedout)return e._timeoutError();if(e._aborted)return;return e.crossDomainError()}e.emit("end")}};var a=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{n.onprogress=a.bind(null,"download"),n.upload&&(n.upload.onprogress=a.bind(null,"upload"))}catch(t){}if(i&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},i)),this._appendQueryString(),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof o&&!this._isHost(o)){var s=this._header["content-type"],l=this._serializer||m.serialize[s?s.split(";")[0]:""];!l&&c(s)&&(l=m.serialize["application/json"]),l&&(o=l(o))}for(var u in this.header)null!=this.header[u]&&n.setRequestHeader(u,this.header[u]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send("undefined"!=typeof o?o:null),this},m.Request=p,m.get=function(t,e,n){var r=m("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},m.head=function(t,e,n){var r=m("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},m.options=function(t,e,n){var r=m("OPTIONS",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},m.del=d,m.delete=d,m.patch=function(t,e,n){var r=m("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},m.post=function(t,e,n){var r=m("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},m.put=function(t,e,n){var r=m("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}},{"./is-object":26,"./request":28,"./request-base":27,emitter:19}],26:[function(t,e,n){function r(t){return null!==t&&"object"==typeof t}e.exports=r},{}],27:[function(t,e,n){var r=t("./is-object");n.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},n.parse=function(t){return this._parser=t,this},n.serialize=function(t){return this._serializer=t,this},n.timeout=function(t){return this._timeout=t,this},n.then=function(t,e){if(!this._fullfilledPromise){var n=this;this._fullfilledPromise=new Promise(function(t,e){n.end(function(n,r){n?e(n):t(r)})})}return this._fullfilledPromise.then(t,e)},n.catch=function(t){return this.then(void 0,t)},n.use=function(t){return t(this),this},n.get=function(t){return this._header[t.toLowerCase()]},n.getHeader=n.get,n.set=function(t,e){if(r(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},n.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},n.field=function(t,e){if(null===t||void 0===t)throw new Error(".field(name, val) name can not be empty");if(r(t)){for(var n in t)this.field(n,t[n]);return this}if(null===e||void 0===e)throw new Error(".field(name, val) val can not be empty");return this._getFormData().append(t,e),this},n.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},n.withCredentials=function(){return this._withCredentials=!0,this},n.redirects=function(t){return this._maxRedirects=t,this},n.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},n._isHost=function(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}},n.send=function(t){var e=r(t),n=this._header["content-type"];if(e&&r(this._data))for(var i in t)this._data[i]=t[i];else"string"==typeof t?(n||this.type("form"),n=this._header["content-type"],"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return!e||this._isHost(t)?this:(n||this.type("json"),this)}},{"./is-object":26}],28:[function(t,e,n){function r(t,e,n){return"function"==typeof n?new t("GET",e).end(n):2==arguments.length?new t("GET",e):new t(e,n)}e.exports=r},{}],29:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],30:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],31:[function(t,e,n){(function(e,r){function i(t,e){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(e)?r.showHidden=e:e&&n._extend(r,e),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),c(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function c(t,e,r){if(t.customInspect&&e&&j(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return y(i)||(i=c(t,i,r)),i}var o=l(t,e);if(o)return o;var a=Object.keys(e),v=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),E(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return u(e);if(0===a.length){if(j(e)){var g=e.name?": "+e.name:"";return t.stylize("[Function"+g+"]","special")}if(k(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(C(e))return t.stylize(Date.prototype.toString.call(e),"date");if(E(e))return u(e)}var _="",m=!1,b=["{","}"];if(f(e)&&(m=!0,b=["[","]"]),j(e)){var w=e.name?": "+e.name:"";_=" [Function"+w+"]"}if(k(e)&&(_=" "+RegExp.prototype.toString.call(e)),C(e)&&(_=" "+Date.prototype.toUTCString.call(e)),E(e)&&(_=" "+u(e)),0===a.length&&(!m||0==e.length))return b[0]+_+b[1];if(r<0)return k(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var x;return x=m?h(t,e,r,v,a):a.map(function(n){return p(t,e,r,v,n,m)}),t.seen.pop(),d(x,_,b)}function l(t,e){if(w(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)F(e,String(a))?o.push(p(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(t,e,n,r,i,!0))}),o}function p(t,e,n,r,i,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},l.get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),F(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(l.value)<0?(s=g(n)?c(t,l.value,null):c(t,l.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function f(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function g(t){return null===t}function _(t){return null==t}function m(t){return"number"==typeof t}function y(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function w(t){return void 0===t}function k(t){return x(t)&&"[object RegExp]"===A(t)}function x(t){return"object"==typeof t&&null!==t}function C(t){return x(t)&&"[object Date]"===A(t)}function E(t){return x(t)&&("[object Error]"===A(t)||t instanceof Error)}function j(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function A(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}function O(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),I[t.getMonth()],e].join(" ")}function F(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var P=/%[sdj%]/g;n.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(t).replace(P,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),s=r[n];n<o;s=r[++n])a+=g(s)||!x(s)?" "+s:" "+i(s);return a},n.deprecate=function(t,i){function o(){if(!a){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),a=!0}return t.apply(this,arguments)}if(w(r.process))return function(){return n.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var a=!1;return o};var R,D={};n.debuglog=function(t){if(w(R)&&(R=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!D[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var r=e.pid;D[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else D[t]=function(){};return D[t]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=f,n.isBoolean=v,n.isNull=g,n.isNullOrUndefined=_,n.isNumber=m,n.isString=y,n.isSymbol=b,n.isUndefined=w,n.isRegExp=k,n.isObject=x,n.isDate=C,n.isError=E,n.isFunction=j,n.isPrimitive=T,n.isBuffer=t("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",O(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!x(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":30,_process:24,inherits:29}]},{},[11])(11)});